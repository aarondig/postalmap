{"version":3,"file":"static/js/817.479e1da9.chunk.js","mappings":"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","sources":["../../../node_modules/cheerio/lib/api/forms.js","../../../node_modules/cheerio/lib/utils.js","../../../node_modules/dom-serializer/lib/foreignNames.js","../../../node_modules/dom-serializer/lib/index.js","../../../node_modules/domelementtype/lib/index.js","../../../node_modules/domhandler/lib/index.js","../../../node_modules/domhandler/lib/node.js","../../../node_modules/domutils/lib/feeds.js","../../../node_modules/domutils/lib/helpers.js","../../../node_modules/domutils/lib/index.js","../../../node_modules/domutils/lib/legacy.js","../../../node_modules/domutils/lib/manipulation.js","../../../node_modules/domutils/lib/querying.js","../../../node_modules/domutils/lib/stringify.js","../../../node_modules/domutils/lib/traversal.js","../../../node_modules/entities/lib/decode.js","../../../node_modules/entities/lib/decode_codepoint.js","../../../node_modules/entities/lib/encode.js","../../../node_modules/entities/lib/index.js","../../../node_modules/htmlparser2/lib/FeedHandler.js","../../../node_modules/htmlparser2/lib/Parser.js","../../../node_modules/htmlparser2/lib/Tokenizer.js","../../../node_modules/htmlparser2/lib/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeArray = exports.serialize = void 0;\nvar utils_1 = require(\"../utils\");\n/*\n * https://github.com/jquery/jquery/blob/2.1.3/src/manipulation/var/rcheckableType.js\n * https://github.com/jquery/jquery/blob/2.1.3/src/serialize.js\n */\nvar submittableSelector = 'input,select,textarea,keygen';\nvar r20 = /%20/g;\nvar rCRLF = /\\r?\\n/g;\n/**\n * Encode a set of form elements as a string for submission.\n *\n * @category Forms\n * @returns The serialized form.\n * @see {@link https://api.jquery.com/serialize/}\n */\nfunction serialize() {\n    // Convert form elements into name/value objects\n    var arr = this.serializeArray();\n    // Serialize each element into a key/value string\n    var retArr = arr.map(function (data) {\n        return encodeURIComponent(data.name) + \"=\" + encodeURIComponent(data.value);\n    });\n    // Return the resulting serialization\n    return retArr.join('&').replace(r20, '+');\n}\nexports.serialize = serialize;\n/**\n * Encode a set of form elements as an array of names and values.\n *\n * @category Forms\n * @example\n *\n * ```js\n * $('<form><input name=\"foo\" value=\"bar\" /></form>').serializeArray();\n * //=> [ { name: 'foo', value: 'bar' } ]\n * ```\n *\n * @returns The serialized form.\n * @see {@link https://api.jquery.com/serializeArray/}\n */\nfunction serializeArray() {\n    var _this = this;\n    // Resolve all form elements from either forms or collections of form elements\n    return this.map(function (_, elem) {\n        var $elem = _this._make(elem);\n        if (utils_1.isTag(elem) && elem.name === 'form') {\n            return $elem.find(submittableSelector).toArray();\n        }\n        return $elem.filter(submittableSelector).toArray();\n    })\n        .filter(\n    // Verify elements have a name (`attr.name`) and are not disabled (`:enabled`)\n    '[name!=\"\"]:enabled' +\n        // And cannot be clicked (`[type=submit]`) or are used in `x-www-form-urlencoded` (`[type=file]`)\n        ':not(:submit, :button, :image, :reset, :file)' +\n        // And are either checked/don't have a checkable state\n        ':matches([checked], :not(:checkbox, :radio))'\n    // Convert each of the elements to its value(s)\n    )\n        .map(function (_, elem) {\n        var _a;\n        var $elem = _this._make(elem);\n        var name = $elem.attr('name'); // We have filtered for elements with a name before.\n        // If there is no value set (e.g. `undefined`, `null`), then default value to empty\n        var value = (_a = $elem.val()) !== null && _a !== void 0 ? _a : '';\n        // If we have an array of values (e.g. `<select multiple>`), return an array of key/value pairs\n        if (Array.isArray(value)) {\n            return value.map(function (val) {\n                /*\n                 * We trim replace any line endings (e.g. `\\r` or `\\r\\n` with `\\r\\n`) to guarantee consistency across platforms\n                 * These can occur inside of `<textarea>'s`\n                 */\n                return ({ name: name, value: val.replace(rCRLF, '\\r\\n') });\n            });\n        }\n        // Otherwise (e.g. `<input type=\"text\">`, return only one key/value pair\n        return { name: name, value: value.replace(rCRLF, '\\r\\n') };\n    })\n        .toArray();\n}\nexports.serializeArray = serializeArray;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isHtml = exports.cloneDom = exports.domEach = exports.cssCase = exports.camelCase = exports.isCheerio = exports.isTag = void 0;\nvar htmlparser2_1 = require(\"htmlparser2\");\nvar domhandler_1 = require(\"domhandler\");\n/**\n * Check if the DOM element is a tag.\n *\n * `isTag(type)` includes `<script>` and `<style>` tags.\n *\n * @private\n * @category Utils\n * @param type - DOM node to check.\n * @returns Whether the node is a tag.\n */\nexports.isTag = htmlparser2_1.DomUtils.isTag;\n/**\n * Checks if an object is a Cheerio instance.\n *\n * @category Utils\n * @param maybeCheerio - The object to check.\n * @returns Whether the object is a Cheerio instance.\n */\nfunction isCheerio(maybeCheerio) {\n    return maybeCheerio.cheerio != null;\n}\nexports.isCheerio = isCheerio;\n/**\n * Convert a string to camel case notation.\n *\n * @private\n * @category Utils\n * @param str - String to be converted.\n * @returns String in camel case notation.\n */\nfunction camelCase(str) {\n    return str.replace(/[_.-](\\w|$)/g, function (_, x) { return x.toUpperCase(); });\n}\nexports.camelCase = camelCase;\n/**\n * Convert a string from camel case to \"CSS case\", where word boundaries are\n * described by hyphens (\"-\") and all characters are lower-case.\n *\n * @private\n * @category Utils\n * @param str - String to be converted.\n * @returns String in \"CSS case\".\n */\nfunction cssCase(str) {\n    return str.replace(/[A-Z]/g, '-$&').toLowerCase();\n}\nexports.cssCase = cssCase;\n/**\n * Iterate over each DOM element without creating intermediary Cheerio instances.\n *\n * This is indented for use internally to avoid otherwise unnecessary memory\n * pressure introduced by _make.\n *\n * @category Utils\n * @param array - Array to iterate over.\n * @param fn - Function to call.\n * @returns The original instance.\n */\nfunction domEach(array, fn) {\n    var len = array.length;\n    for (var i = 0; i < len; i++)\n        fn(array[i], i);\n    return array;\n}\nexports.domEach = domEach;\n/**\n * Create a deep copy of the given DOM structure. Sets the parents of the copies\n * of the passed nodes to `null`.\n *\n * @private\n * @category Utils\n * @param dom - The htmlparser2-compliant DOM structure.\n * @returns - The cloned DOM.\n */\nfunction cloneDom(dom) {\n    var clone = 'length' in dom\n        ? Array.prototype.map.call(dom, function (el) { return domhandler_1.cloneNode(el, true); })\n        : [domhandler_1.cloneNode(dom, true)];\n    // Add a root node around the cloned nodes\n    var root = new domhandler_1.Document(clone);\n    clone.forEach(function (node) {\n        node.parent = root;\n    });\n    return clone;\n}\nexports.cloneDom = cloneDom;\n/**\n * A simple way to check for HTML strings. Tests for a `<` within a string,\n * immediate followed by a letter and eventually followed by a `>`.\n *\n * @private\n */\nvar quickExpr = /<[a-zA-Z][^]*>/;\n/**\n * Check if string is HTML.\n *\n * @private\n * @category Utils\n * @param str - String to check.\n * @returns Indicates if `str` is HTML.\n */\nfunction isHtml(str) {\n    // Run the regex\n    return quickExpr.test(str);\n}\nexports.isHtml = isHtml;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attributeNames = exports.elementNames = void 0;\nexports.elementNames = new Map([\n    [\"altglyph\", \"altGlyph\"],\n    [\"altglyphdef\", \"altGlyphDef\"],\n    [\"altglyphitem\", \"altGlyphItem\"],\n    [\"animatecolor\", \"animateColor\"],\n    [\"animatemotion\", \"animateMotion\"],\n    [\"animatetransform\", \"animateTransform\"],\n    [\"clippath\", \"clipPath\"],\n    [\"feblend\", \"feBlend\"],\n    [\"fecolormatrix\", \"feColorMatrix\"],\n    [\"fecomponenttransfer\", \"feComponentTransfer\"],\n    [\"fecomposite\", \"feComposite\"],\n    [\"feconvolvematrix\", \"feConvolveMatrix\"],\n    [\"fediffuselighting\", \"feDiffuseLighting\"],\n    [\"fedisplacementmap\", \"feDisplacementMap\"],\n    [\"fedistantlight\", \"feDistantLight\"],\n    [\"fedropshadow\", \"feDropShadow\"],\n    [\"feflood\", \"feFlood\"],\n    [\"fefunca\", \"feFuncA\"],\n    [\"fefuncb\", \"feFuncB\"],\n    [\"fefuncg\", \"feFuncG\"],\n    [\"fefuncr\", \"feFuncR\"],\n    [\"fegaussianblur\", \"feGaussianBlur\"],\n    [\"feimage\", \"feImage\"],\n    [\"femerge\", \"feMerge\"],\n    [\"femergenode\", \"feMergeNode\"],\n    [\"femorphology\", \"feMorphology\"],\n    [\"feoffset\", \"feOffset\"],\n    [\"fepointlight\", \"fePointLight\"],\n    [\"fespecularlighting\", \"feSpecularLighting\"],\n    [\"fespotlight\", \"feSpotLight\"],\n    [\"fetile\", \"feTile\"],\n    [\"feturbulence\", \"feTurbulence\"],\n    [\"foreignobject\", \"foreignObject\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"lineargradient\", \"linearGradient\"],\n    [\"radialgradient\", \"radialGradient\"],\n    [\"textpath\", \"textPath\"],\n]);\nexports.attributeNames = new Map([\n    [\"definitionurl\", \"definitionURL\"],\n    [\"attributename\", \"attributeName\"],\n    [\"attributetype\", \"attributeType\"],\n    [\"basefrequency\", \"baseFrequency\"],\n    [\"baseprofile\", \"baseProfile\"],\n    [\"calcmode\", \"calcMode\"],\n    [\"clippathunits\", \"clipPathUnits\"],\n    [\"diffuseconstant\", \"diffuseConstant\"],\n    [\"edgemode\", \"edgeMode\"],\n    [\"filterunits\", \"filterUnits\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"gradienttransform\", \"gradientTransform\"],\n    [\"gradientunits\", \"gradientUnits\"],\n    [\"kernelmatrix\", \"kernelMatrix\"],\n    [\"kernelunitlength\", \"kernelUnitLength\"],\n    [\"keypoints\", \"keyPoints\"],\n    [\"keysplines\", \"keySplines\"],\n    [\"keytimes\", \"keyTimes\"],\n    [\"lengthadjust\", \"lengthAdjust\"],\n    [\"limitingconeangle\", \"limitingConeAngle\"],\n    [\"markerheight\", \"markerHeight\"],\n    [\"markerunits\", \"markerUnits\"],\n    [\"markerwidth\", \"markerWidth\"],\n    [\"maskcontentunits\", \"maskContentUnits\"],\n    [\"maskunits\", \"maskUnits\"],\n    [\"numoctaves\", \"numOctaves\"],\n    [\"pathlength\", \"pathLength\"],\n    [\"patterncontentunits\", \"patternContentUnits\"],\n    [\"patterntransform\", \"patternTransform\"],\n    [\"patternunits\", \"patternUnits\"],\n    [\"pointsatx\", \"pointsAtX\"],\n    [\"pointsaty\", \"pointsAtY\"],\n    [\"pointsatz\", \"pointsAtZ\"],\n    [\"preservealpha\", \"preserveAlpha\"],\n    [\"preserveaspectratio\", \"preserveAspectRatio\"],\n    [\"primitiveunits\", \"primitiveUnits\"],\n    [\"refx\", \"refX\"],\n    [\"refy\", \"refY\"],\n    [\"repeatcount\", \"repeatCount\"],\n    [\"repeatdur\", \"repeatDur\"],\n    [\"requiredextensions\", \"requiredExtensions\"],\n    [\"requiredfeatures\", \"requiredFeatures\"],\n    [\"specularconstant\", \"specularConstant\"],\n    [\"specularexponent\", \"specularExponent\"],\n    [\"spreadmethod\", \"spreadMethod\"],\n    [\"startoffset\", \"startOffset\"],\n    [\"stddeviation\", \"stdDeviation\"],\n    [\"stitchtiles\", \"stitchTiles\"],\n    [\"surfacescale\", \"surfaceScale\"],\n    [\"systemlanguage\", \"systemLanguage\"],\n    [\"tablevalues\", \"tableValues\"],\n    [\"targetx\", \"targetX\"],\n    [\"targety\", \"targetY\"],\n    [\"textlength\", \"textLength\"],\n    [\"viewbox\", \"viewBox\"],\n    [\"viewtarget\", \"viewTarget\"],\n    [\"xchannelselector\", \"xChannelSelector\"],\n    [\"ychannelselector\", \"yChannelSelector\"],\n    [\"zoomandpan\", \"zoomAndPan\"],\n]);\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Module dependencies\n */\nvar ElementType = __importStar(require(\"domelementtype\"));\nvar entities_1 = require(\"entities\");\n/**\n * Mixed-case SVG and MathML tags & attributes\n * recognized by the HTML parser.\n *\n * @see https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign\n */\nvar foreignNames_1 = require(\"./foreignNames\");\nvar unencodedElements = new Set([\n    \"style\",\n    \"script\",\n    \"xmp\",\n    \"iframe\",\n    \"noembed\",\n    \"noframes\",\n    \"plaintext\",\n    \"noscript\",\n]);\n/**\n * Format attributes\n */\nfunction formatAttributes(attributes, opts) {\n    if (!attributes)\n        return;\n    return Object.keys(attributes)\n        .map(function (key) {\n        var _a, _b;\n        var value = (_a = attributes[key]) !== null && _a !== void 0 ? _a : \"\";\n        if (opts.xmlMode === \"foreign\") {\n            /* Fix up mixed-case attribute names */\n            key = (_b = foreignNames_1.attributeNames.get(key)) !== null && _b !== void 0 ? _b : key;\n        }\n        if (!opts.emptyAttrs && !opts.xmlMode && value === \"\") {\n            return key;\n        }\n        return key + \"=\\\"\" + (opts.decodeEntities !== false\n            ? entities_1.encodeXML(value)\n            : value.replace(/\"/g, \"&quot;\")) + \"\\\"\";\n    })\n        .join(\" \");\n}\n/**\n * Self-enclosing tags\n */\nvar singleTag = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\n/**\n * Renders a DOM node or an array of DOM nodes to a string.\n *\n * Can be thought of as the equivalent of the `outerHTML` of the passed node(s).\n *\n * @param node Node to be rendered.\n * @param options Changes serialization behavior\n */\nfunction render(node, options) {\n    if (options === void 0) { options = {}; }\n    var nodes = \"length\" in node ? node : [node];\n    var output = \"\";\n    for (var i = 0; i < nodes.length; i++) {\n        output += renderNode(nodes[i], options);\n    }\n    return output;\n}\nexports.default = render;\nfunction renderNode(node, options) {\n    switch (node.type) {\n        case ElementType.Root:\n            return render(node.children, options);\n        case ElementType.Directive:\n        case ElementType.Doctype:\n            return renderDirective(node);\n        case ElementType.Comment:\n            return renderComment(node);\n        case ElementType.CDATA:\n            return renderCdata(node);\n        case ElementType.Script:\n        case ElementType.Style:\n        case ElementType.Tag:\n            return renderTag(node, options);\n        case ElementType.Text:\n            return renderText(node, options);\n    }\n}\nvar foreignModeIntegrationPoints = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar foreignElements = new Set([\"svg\", \"math\"]);\nfunction renderTag(elem, opts) {\n    var _a;\n    // Handle SVG / MathML in HTML\n    if (opts.xmlMode === \"foreign\") {\n        /* Fix up mixed-case element names */\n        elem.name = (_a = foreignNames_1.elementNames.get(elem.name)) !== null && _a !== void 0 ? _a : elem.name;\n        /* Exit foreign mode at integration points */\n        if (elem.parent &&\n            foreignModeIntegrationPoints.has(elem.parent.name)) {\n            opts = __assign(__assign({}, opts), { xmlMode: false });\n        }\n    }\n    if (!opts.xmlMode && foreignElements.has(elem.name)) {\n        opts = __assign(__assign({}, opts), { xmlMode: \"foreign\" });\n    }\n    var tag = \"<\" + elem.name;\n    var attribs = formatAttributes(elem.attribs, opts);\n    if (attribs) {\n        tag += \" \" + attribs;\n    }\n    if (elem.children.length === 0 &&\n        (opts.xmlMode\n            ? // In XML mode or foreign mode, and user hasn't explicitly turned off self-closing tags\n                opts.selfClosingTags !== false\n            : // User explicitly asked for self-closing tags, even in HTML mode\n                opts.selfClosingTags && singleTag.has(elem.name))) {\n        if (!opts.xmlMode)\n            tag += \" \";\n        tag += \"/>\";\n    }\n    else {\n        tag += \">\";\n        if (elem.children.length > 0) {\n            tag += render(elem.children, opts);\n        }\n        if (opts.xmlMode || !singleTag.has(elem.name)) {\n            tag += \"</\" + elem.name + \">\";\n        }\n    }\n    return tag;\n}\nfunction renderDirective(elem) {\n    return \"<\" + elem.data + \">\";\n}\nfunction renderText(elem, opts) {\n    var data = elem.data || \"\";\n    // If entities weren't decoded, no need to encode them back\n    if (opts.decodeEntities !== false &&\n        !(!opts.xmlMode &&\n            elem.parent &&\n            unencodedElements.has(elem.parent.name))) {\n        data = entities_1.encodeXML(data);\n    }\n    return data;\n}\nfunction renderCdata(elem) {\n    return \"<![CDATA[\" + elem.children[0].data + \"]]>\";\n}\nfunction renderComment(elem) {\n    return \"<!--\" + elem.data + \"-->\";\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Doctype = exports.CDATA = exports.Tag = exports.Style = exports.Script = exports.Comment = exports.Directive = exports.Text = exports.Root = exports.isTag = exports.ElementType = void 0;\n/** Types of elements found in htmlparser2's DOM */\nvar ElementType;\n(function (ElementType) {\n    /** Type for the root element of a document */\n    ElementType[\"Root\"] = \"root\";\n    /** Type for Text */\n    ElementType[\"Text\"] = \"text\";\n    /** Type for <? ... ?> */\n    ElementType[\"Directive\"] = \"directive\";\n    /** Type for <!-- ... --> */\n    ElementType[\"Comment\"] = \"comment\";\n    /** Type for <script> tags */\n    ElementType[\"Script\"] = \"script\";\n    /** Type for <style> tags */\n    ElementType[\"Style\"] = \"style\";\n    /** Type for Any tag */\n    ElementType[\"Tag\"] = \"tag\";\n    /** Type for <![CDATA[ ... ]]> */\n    ElementType[\"CDATA\"] = \"cdata\";\n    /** Type for <!doctype ...> */\n    ElementType[\"Doctype\"] = \"doctype\";\n})(ElementType = exports.ElementType || (exports.ElementType = {}));\n/**\n * Tests whether an element is a tag or not.\n *\n * @param elem Element to test\n */\nfunction isTag(elem) {\n    return (elem.type === ElementType.Tag ||\n        elem.type === ElementType.Script ||\n        elem.type === ElementType.Style);\n}\nexports.isTag = isTag;\n// Exports for backwards compatibility\n/** Type for the root element of a document */\nexports.Root = ElementType.Root;\n/** Type for Text */\nexports.Text = ElementType.Text;\n/** Type for <? ... ?> */\nexports.Directive = ElementType.Directive;\n/** Type for <!-- ... --> */\nexports.Comment = ElementType.Comment;\n/** Type for <script> tags */\nexports.Script = ElementType.Script;\n/** Type for <style> tags */\nexports.Style = ElementType.Style;\n/** Type for Any tag */\nexports.Tag = ElementType.Tag;\n/** Type for <![CDATA[ ... ]]> */\nexports.CDATA = ElementType.CDATA;\n/** Type for <!doctype ...> */\nexports.Doctype = ElementType.Doctype;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DomHandler = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\nvar node_1 = require(\"./node\");\n__exportStar(require(\"./node\"), exports);\nvar reWhitespace = /\\s+/g;\n// Default options\nvar defaultOpts = {\n    normalizeWhitespace: false,\n    withStartIndices: false,\n    withEndIndices: false,\n    xmlMode: false,\n};\nvar DomHandler = /** @class */ (function () {\n    /**\n     * @param callback Called once parsing has completed.\n     * @param options Settings for the handler.\n     * @param elementCB Callback whenever a tag is closed.\n     */\n    function DomHandler(callback, options, elementCB) {\n        /** The elements of the DOM */\n        this.dom = [];\n        /** The root element for the DOM */\n        this.root = new node_1.Document(this.dom);\n        /** Indicated whether parsing has been completed. */\n        this.done = false;\n        /** Stack of open tags. */\n        this.tagStack = [this.root];\n        /** A data node that is still being written to. */\n        this.lastNode = null;\n        /** Reference to the parser instance. Used for location information. */\n        this.parser = null;\n        // Make it possible to skip arguments, for backwards-compatibility\n        if (typeof options === \"function\") {\n            elementCB = options;\n            options = defaultOpts;\n        }\n        if (typeof callback === \"object\") {\n            options = callback;\n            callback = undefined;\n        }\n        this.callback = callback !== null && callback !== void 0 ? callback : null;\n        this.options = options !== null && options !== void 0 ? options : defaultOpts;\n        this.elementCB = elementCB !== null && elementCB !== void 0 ? elementCB : null;\n    }\n    DomHandler.prototype.onparserinit = function (parser) {\n        this.parser = parser;\n    };\n    // Resets the handler back to starting state\n    DomHandler.prototype.onreset = function () {\n        this.dom = [];\n        this.root = new node_1.Document(this.dom);\n        this.done = false;\n        this.tagStack = [this.root];\n        this.lastNode = null;\n        this.parser = null;\n    };\n    // Signals the handler that parsing is done\n    DomHandler.prototype.onend = function () {\n        if (this.done)\n            return;\n        this.done = true;\n        this.parser = null;\n        this.handleCallback(null);\n    };\n    DomHandler.prototype.onerror = function (error) {\n        this.handleCallback(error);\n    };\n    DomHandler.prototype.onclosetag = function () {\n        this.lastNode = null;\n        var elem = this.tagStack.pop();\n        if (this.options.withEndIndices) {\n            elem.endIndex = this.parser.endIndex;\n        }\n        if (this.elementCB)\n            this.elementCB(elem);\n    };\n    DomHandler.prototype.onopentag = function (name, attribs) {\n        var type = this.options.xmlMode ? domelementtype_1.ElementType.Tag : undefined;\n        var element = new node_1.Element(name, attribs, undefined, type);\n        this.addNode(element);\n        this.tagStack.push(element);\n    };\n    DomHandler.prototype.ontext = function (data) {\n        var normalizeWhitespace = this.options.normalizeWhitespace;\n        var lastNode = this.lastNode;\n        if (lastNode && lastNode.type === domelementtype_1.ElementType.Text) {\n            if (normalizeWhitespace) {\n                lastNode.data = (lastNode.data + data).replace(reWhitespace, \" \");\n            }\n            else {\n                lastNode.data += data;\n            }\n            if (this.options.withEndIndices) {\n                lastNode.endIndex = this.parser.endIndex;\n            }\n        }\n        else {\n            if (normalizeWhitespace) {\n                data = data.replace(reWhitespace, \" \");\n            }\n            var node = new node_1.Text(data);\n            this.addNode(node);\n            this.lastNode = node;\n        }\n    };\n    DomHandler.prototype.oncomment = function (data) {\n        if (this.lastNode && this.lastNode.type === domelementtype_1.ElementType.Comment) {\n            this.lastNode.data += data;\n            return;\n        }\n        var node = new node_1.Comment(data);\n        this.addNode(node);\n        this.lastNode = node;\n    };\n    DomHandler.prototype.oncommentend = function () {\n        this.lastNode = null;\n    };\n    DomHandler.prototype.oncdatastart = function () {\n        var text = new node_1.Text(\"\");\n        var node = new node_1.NodeWithChildren(domelementtype_1.ElementType.CDATA, [text]);\n        this.addNode(node);\n        text.parent = node;\n        this.lastNode = text;\n    };\n    DomHandler.prototype.oncdataend = function () {\n        this.lastNode = null;\n    };\n    DomHandler.prototype.onprocessinginstruction = function (name, data) {\n        var node = new node_1.ProcessingInstruction(name, data);\n        this.addNode(node);\n    };\n    DomHandler.prototype.handleCallback = function (error) {\n        if (typeof this.callback === \"function\") {\n            this.callback(error, this.dom);\n        }\n        else if (error) {\n            throw error;\n        }\n    };\n    DomHandler.prototype.addNode = function (node) {\n        var parent = this.tagStack[this.tagStack.length - 1];\n        var previousSibling = parent.children[parent.children.length - 1];\n        if (this.options.withStartIndices) {\n            node.startIndex = this.parser.startIndex;\n        }\n        if (this.options.withEndIndices) {\n            node.endIndex = this.parser.endIndex;\n        }\n        parent.children.push(node);\n        if (previousSibling) {\n            node.prev = previousSibling;\n            previousSibling.next = node;\n        }\n        node.parent = parent;\n        this.lastNode = null;\n    };\n    return DomHandler;\n}());\nexports.DomHandler = DomHandler;\nexports.default = DomHandler;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cloneNode = exports.hasChildren = exports.isDocument = exports.isDirective = exports.isComment = exports.isText = exports.isCDATA = exports.isTag = exports.Element = exports.Document = exports.NodeWithChildren = exports.ProcessingInstruction = exports.Comment = exports.Text = exports.DataNode = exports.Node = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\nvar nodeTypes = new Map([\n    [domelementtype_1.ElementType.Tag, 1],\n    [domelementtype_1.ElementType.Script, 1],\n    [domelementtype_1.ElementType.Style, 1],\n    [domelementtype_1.ElementType.Directive, 1],\n    [domelementtype_1.ElementType.Text, 3],\n    [domelementtype_1.ElementType.CDATA, 4],\n    [domelementtype_1.ElementType.Comment, 8],\n    [domelementtype_1.ElementType.Root, 9],\n]);\n/**\n * This object will be used as the prototype for Nodes when creating a\n * DOM-Level-1-compliant structure.\n */\nvar Node = /** @class */ (function () {\n    /**\n     *\n     * @param type The type of the node.\n     */\n    function Node(type) {\n        this.type = type;\n        /** Parent of the node */\n        this.parent = null;\n        /** Previous sibling */\n        this.prev = null;\n        /** Next sibling */\n        this.next = null;\n        /** The start index of the node. Requires `withStartIndices` on the handler to be `true. */\n        this.startIndex = null;\n        /** The end index of the node. Requires `withEndIndices` on the handler to be `true. */\n        this.endIndex = null;\n    }\n    Object.defineProperty(Node.prototype, \"nodeType\", {\n        // Read-only aliases\n        /**\n         * [DOM spec](https://dom.spec.whatwg.org/#dom-node-nodetype)-compatible\n         * node {@link type}.\n         */\n        get: function () {\n            var _a;\n            return (_a = nodeTypes.get(this.type)) !== null && _a !== void 0 ? _a : 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"parentNode\", {\n        // Read-write aliases for properties\n        /**\n         * Same as {@link parent}.\n         * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n         */\n        get: function () {\n            return this.parent;\n        },\n        set: function (parent) {\n            this.parent = parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"previousSibling\", {\n        /**\n         * Same as {@link prev}.\n         * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n         */\n        get: function () {\n            return this.prev;\n        },\n        set: function (prev) {\n            this.prev = prev;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"nextSibling\", {\n        /**\n         * Same as {@link next}.\n         * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n         */\n        get: function () {\n            return this.next;\n        },\n        set: function (next) {\n            this.next = next;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Clone this node, and optionally its children.\n     *\n     * @param recursive Clone child nodes as well.\n     * @returns A clone of the node.\n     */\n    Node.prototype.cloneNode = function (recursive) {\n        if (recursive === void 0) { recursive = false; }\n        return cloneNode(this, recursive);\n    };\n    return Node;\n}());\nexports.Node = Node;\n/**\n * A node that contains some data.\n */\nvar DataNode = /** @class */ (function (_super) {\n    __extends(DataNode, _super);\n    /**\n     * @param type The type of the node\n     * @param data The content of the data node\n     */\n    function DataNode(type, data) {\n        var _this = _super.call(this, type) || this;\n        _this.data = data;\n        return _this;\n    }\n    Object.defineProperty(DataNode.prototype, \"nodeValue\", {\n        /**\n         * Same as {@link data}.\n         * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n         */\n        get: function () {\n            return this.data;\n        },\n        set: function (data) {\n            this.data = data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DataNode;\n}(Node));\nexports.DataNode = DataNode;\n/**\n * Text within the document.\n */\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text(data) {\n        return _super.call(this, domelementtype_1.ElementType.Text, data) || this;\n    }\n    return Text;\n}(DataNode));\nexports.Text = Text;\n/**\n * Comments within the document.\n */\nvar Comment = /** @class */ (function (_super) {\n    __extends(Comment, _super);\n    function Comment(data) {\n        return _super.call(this, domelementtype_1.ElementType.Comment, data) || this;\n    }\n    return Comment;\n}(DataNode));\nexports.Comment = Comment;\n/**\n * Processing instructions, including doc types.\n */\nvar ProcessingInstruction = /** @class */ (function (_super) {\n    __extends(ProcessingInstruction, _super);\n    function ProcessingInstruction(name, data) {\n        var _this = _super.call(this, domelementtype_1.ElementType.Directive, data) || this;\n        _this.name = name;\n        return _this;\n    }\n    return ProcessingInstruction;\n}(DataNode));\nexports.ProcessingInstruction = ProcessingInstruction;\n/**\n * A `Node` that can have children.\n */\nvar NodeWithChildren = /** @class */ (function (_super) {\n    __extends(NodeWithChildren, _super);\n    /**\n     * @param type Type of the node.\n     * @param children Children of the node. Only certain node types can have children.\n     */\n    function NodeWithChildren(type, children) {\n        var _this = _super.call(this, type) || this;\n        _this.children = children;\n        return _this;\n    }\n    Object.defineProperty(NodeWithChildren.prototype, \"firstChild\", {\n        // Aliases\n        /** First child of the node. */\n        get: function () {\n            var _a;\n            return (_a = this.children[0]) !== null && _a !== void 0 ? _a : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NodeWithChildren.prototype, \"lastChild\", {\n        /** Last child of the node. */\n        get: function () {\n            return this.children.length > 0\n                ? this.children[this.children.length - 1]\n                : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NodeWithChildren.prototype, \"childNodes\", {\n        /**\n         * Same as {@link children}.\n         * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n         */\n        get: function () {\n            return this.children;\n        },\n        set: function (children) {\n            this.children = children;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return NodeWithChildren;\n}(Node));\nexports.NodeWithChildren = NodeWithChildren;\n/**\n * The root node of the document.\n */\nvar Document = /** @class */ (function (_super) {\n    __extends(Document, _super);\n    function Document(children) {\n        return _super.call(this, domelementtype_1.ElementType.Root, children) || this;\n    }\n    return Document;\n}(NodeWithChildren));\nexports.Document = Document;\n/**\n * An element within the DOM.\n */\nvar Element = /** @class */ (function (_super) {\n    __extends(Element, _super);\n    /**\n     * @param name Name of the tag, eg. `div`, `span`.\n     * @param attribs Object mapping attribute names to attribute values.\n     * @param children Children of the node.\n     */\n    function Element(name, attribs, children, type) {\n        if (children === void 0) { children = []; }\n        if (type === void 0) { type = name === \"script\"\n            ? domelementtype_1.ElementType.Script\n            : name === \"style\"\n                ? domelementtype_1.ElementType.Style\n                : domelementtype_1.ElementType.Tag; }\n        var _this = _super.call(this, type, children) || this;\n        _this.name = name;\n        _this.attribs = attribs;\n        return _this;\n    }\n    Object.defineProperty(Element.prototype, \"tagName\", {\n        // DOM Level 1 aliases\n        /**\n         * Same as {@link name}.\n         * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n         */\n        get: function () {\n            return this.name;\n        },\n        set: function (name) {\n            this.name = name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Element.prototype, \"attributes\", {\n        get: function () {\n            var _this = this;\n            return Object.keys(this.attribs).map(function (name) {\n                var _a, _b;\n                return ({\n                    name: name,\n                    value: _this.attribs[name],\n                    namespace: (_a = _this[\"x-attribsNamespace\"]) === null || _a === void 0 ? void 0 : _a[name],\n                    prefix: (_b = _this[\"x-attribsPrefix\"]) === null || _b === void 0 ? void 0 : _b[name],\n                });\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Element;\n}(NodeWithChildren));\nexports.Element = Element;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `Element`, `false` otherwise.\n */\nfunction isTag(node) {\n    return (0, domelementtype_1.isTag)(node);\n}\nexports.isTag = isTag;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `CDATA`, `false` otherwise.\n */\nfunction isCDATA(node) {\n    return node.type === domelementtype_1.ElementType.CDATA;\n}\nexports.isCDATA = isCDATA;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `Text`, `false` otherwise.\n */\nfunction isText(node) {\n    return node.type === domelementtype_1.ElementType.Text;\n}\nexports.isText = isText;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `Comment`, `false` otherwise.\n */\nfunction isComment(node) {\n    return node.type === domelementtype_1.ElementType.Comment;\n}\nexports.isComment = isComment;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `ProcessingInstruction`, `false` otherwise.\n */\nfunction isDirective(node) {\n    return node.type === domelementtype_1.ElementType.Directive;\n}\nexports.isDirective = isDirective;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `ProcessingInstruction`, `false` otherwise.\n */\nfunction isDocument(node) {\n    return node.type === domelementtype_1.ElementType.Root;\n}\nexports.isDocument = isDocument;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `NodeWithChildren` (has children), `false` otherwise.\n */\nfunction hasChildren(node) {\n    return Object.prototype.hasOwnProperty.call(node, \"children\");\n}\nexports.hasChildren = hasChildren;\n/**\n * Clone a node, and optionally its children.\n *\n * @param recursive Clone child nodes as well.\n * @returns A clone of the node.\n */\nfunction cloneNode(node, recursive) {\n    if (recursive === void 0) { recursive = false; }\n    var result;\n    if (isText(node)) {\n        result = new Text(node.data);\n    }\n    else if (isComment(node)) {\n        result = new Comment(node.data);\n    }\n    else if (isTag(node)) {\n        var children = recursive ? cloneChildren(node.children) : [];\n        var clone_1 = new Element(node.name, __assign({}, node.attribs), children);\n        children.forEach(function (child) { return (child.parent = clone_1); });\n        if (node.namespace != null) {\n            clone_1.namespace = node.namespace;\n        }\n        if (node[\"x-attribsNamespace\"]) {\n            clone_1[\"x-attribsNamespace\"] = __assign({}, node[\"x-attribsNamespace\"]);\n        }\n        if (node[\"x-attribsPrefix\"]) {\n            clone_1[\"x-attribsPrefix\"] = __assign({}, node[\"x-attribsPrefix\"]);\n        }\n        result = clone_1;\n    }\n    else if (isCDATA(node)) {\n        var children = recursive ? cloneChildren(node.children) : [];\n        var clone_2 = new NodeWithChildren(domelementtype_1.ElementType.CDATA, children);\n        children.forEach(function (child) { return (child.parent = clone_2); });\n        result = clone_2;\n    }\n    else if (isDocument(node)) {\n        var children = recursive ? cloneChildren(node.children) : [];\n        var clone_3 = new Document(children);\n        children.forEach(function (child) { return (child.parent = clone_3); });\n        if (node[\"x-mode\"]) {\n            clone_3[\"x-mode\"] = node[\"x-mode\"];\n        }\n        result = clone_3;\n    }\n    else if (isDirective(node)) {\n        var instruction = new ProcessingInstruction(node.name, node.data);\n        if (node[\"x-name\"] != null) {\n            instruction[\"x-name\"] = node[\"x-name\"];\n            instruction[\"x-publicId\"] = node[\"x-publicId\"];\n            instruction[\"x-systemId\"] = node[\"x-systemId\"];\n        }\n        result = instruction;\n    }\n    else {\n        throw new Error(\"Not implemented yet: \".concat(node.type));\n    }\n    result.startIndex = node.startIndex;\n    result.endIndex = node.endIndex;\n    if (node.sourceCodeLocation != null) {\n        result.sourceCodeLocation = node.sourceCodeLocation;\n    }\n    return result;\n}\nexports.cloneNode = cloneNode;\nfunction cloneChildren(childs) {\n    var children = childs.map(function (child) { return cloneNode(child, true); });\n    for (var i = 1; i < children.length; i++) {\n        children[i].prev = children[i - 1];\n        children[i - 1].next = children[i];\n    }\n    return children;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFeed = void 0;\nvar stringify_1 = require(\"./stringify\");\nvar legacy_1 = require(\"./legacy\");\n/**\n * Get the feed object from the root of a DOM tree.\n *\n * @param doc - The DOM to to extract the feed from.\n * @returns The feed.\n */\nfunction getFeed(doc) {\n    var feedRoot = getOneElement(isValidFeed, doc);\n    return !feedRoot\n        ? null\n        : feedRoot.name === \"feed\"\n            ? getAtomFeed(feedRoot)\n            : getRssFeed(feedRoot);\n}\nexports.getFeed = getFeed;\n/**\n * Parse an Atom feed.\n *\n * @param feedRoot The root of the feed.\n * @returns The parsed feed.\n */\nfunction getAtomFeed(feedRoot) {\n    var _a;\n    var childs = feedRoot.children;\n    var feed = {\n        type: \"atom\",\n        items: (0, legacy_1.getElementsByTagName)(\"entry\", childs).map(function (item) {\n            var _a;\n            var children = item.children;\n            var entry = { media: getMediaElements(children) };\n            addConditionally(entry, \"id\", \"id\", children);\n            addConditionally(entry, \"title\", \"title\", children);\n            var href = (_a = getOneElement(\"link\", children)) === null || _a === void 0 ? void 0 : _a.attribs.href;\n            if (href) {\n                entry.link = href;\n            }\n            var description = fetch(\"summary\", children) || fetch(\"content\", children);\n            if (description) {\n                entry.description = description;\n            }\n            var pubDate = fetch(\"updated\", children);\n            if (pubDate) {\n                entry.pubDate = new Date(pubDate);\n            }\n            return entry;\n        }),\n    };\n    addConditionally(feed, \"id\", \"id\", childs);\n    addConditionally(feed, \"title\", \"title\", childs);\n    var href = (_a = getOneElement(\"link\", childs)) === null || _a === void 0 ? void 0 : _a.attribs.href;\n    if (href) {\n        feed.link = href;\n    }\n    addConditionally(feed, \"description\", \"subtitle\", childs);\n    var updated = fetch(\"updated\", childs);\n    if (updated) {\n        feed.updated = new Date(updated);\n    }\n    addConditionally(feed, \"author\", \"email\", childs, true);\n    return feed;\n}\n/**\n * Parse a RSS feed.\n *\n * @param feedRoot The root of the feed.\n * @returns The parsed feed.\n */\nfunction getRssFeed(feedRoot) {\n    var _a, _b;\n    var childs = (_b = (_a = getOneElement(\"channel\", feedRoot.children)) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : [];\n    var feed = {\n        type: feedRoot.name.substr(0, 3),\n        id: \"\",\n        items: (0, legacy_1.getElementsByTagName)(\"item\", feedRoot.children).map(function (item) {\n            var children = item.children;\n            var entry = { media: getMediaElements(children) };\n            addConditionally(entry, \"id\", \"guid\", children);\n            addConditionally(entry, \"title\", \"title\", children);\n            addConditionally(entry, \"link\", \"link\", children);\n            addConditionally(entry, \"description\", \"description\", children);\n            var pubDate = fetch(\"pubDate\", children);\n            if (pubDate)\n                entry.pubDate = new Date(pubDate);\n            return entry;\n        }),\n    };\n    addConditionally(feed, \"title\", \"title\", childs);\n    addConditionally(feed, \"link\", \"link\", childs);\n    addConditionally(feed, \"description\", \"description\", childs);\n    var updated = fetch(\"lastBuildDate\", childs);\n    if (updated) {\n        feed.updated = new Date(updated);\n    }\n    addConditionally(feed, \"author\", \"managingEditor\", childs, true);\n    return feed;\n}\nvar MEDIA_KEYS_STRING = [\"url\", \"type\", \"lang\"];\nvar MEDIA_KEYS_INT = [\n    \"fileSize\",\n    \"bitrate\",\n    \"framerate\",\n    \"samplingrate\",\n    \"channels\",\n    \"duration\",\n    \"height\",\n    \"width\",\n];\n/**\n * Get all media elements of a feed item.\n *\n * @param where Nodes to search in.\n * @returns Media elements.\n */\nfunction getMediaElements(where) {\n    return (0, legacy_1.getElementsByTagName)(\"media:content\", where).map(function (elem) {\n        var attribs = elem.attribs;\n        var media = {\n            medium: attribs.medium,\n            isDefault: !!attribs.isDefault,\n        };\n        for (var _i = 0, MEDIA_KEYS_STRING_1 = MEDIA_KEYS_STRING; _i < MEDIA_KEYS_STRING_1.length; _i++) {\n            var attrib = MEDIA_KEYS_STRING_1[_i];\n            if (attribs[attrib]) {\n                media[attrib] = attribs[attrib];\n            }\n        }\n        for (var _a = 0, MEDIA_KEYS_INT_1 = MEDIA_KEYS_INT; _a < MEDIA_KEYS_INT_1.length; _a++) {\n            var attrib = MEDIA_KEYS_INT_1[_a];\n            if (attribs[attrib]) {\n                media[attrib] = parseInt(attribs[attrib], 10);\n            }\n        }\n        if (attribs.expression) {\n            media.expression =\n                attribs.expression;\n        }\n        return media;\n    });\n}\n/**\n * Get one element by tag name.\n *\n * @param tagName Tag name to look for\n * @param node Node to search in\n * @returns The element or null\n */\nfunction getOneElement(tagName, node) {\n    return (0, legacy_1.getElementsByTagName)(tagName, node, true, 1)[0];\n}\n/**\n * Get the text content of an element with a certain tag name.\n *\n * @param tagName Tag name to look for.\n * @param where  Node to search in.\n * @param recurse Whether to recurse into child nodes.\n * @returns The text content of the element.\n */\nfunction fetch(tagName, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    return (0, stringify_1.textContent)((0, legacy_1.getElementsByTagName)(tagName, where, recurse, 1)).trim();\n}\n/**\n * Adds a property to an object if it has a value.\n *\n * @param obj Object to be extended\n * @param prop Property name\n * @param tagName Tag name that contains the conditionally added property\n * @param where Element to search for the property\n * @param recurse Whether to recurse into child nodes.\n */\nfunction addConditionally(obj, prop, tagName, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    var val = fetch(tagName, where, recurse);\n    if (val)\n        obj[prop] = val;\n}\n/**\n * Checks if an element is a feed root node.\n *\n * @param value The name of the element to check.\n * @returns Whether an element is a feed root node.\n */\nfunction isValidFeed(value) {\n    return value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uniqueSort = exports.compareDocumentPosition = exports.removeSubsets = void 0;\nvar domhandler_1 = require(\"domhandler\");\n/**\n * Given an array of nodes, remove any member that is contained by another.\n *\n * @param nodes Nodes to filter.\n * @returns Remaining nodes that aren't subtrees of each other.\n */\nfunction removeSubsets(nodes) {\n    var idx = nodes.length;\n    /*\n     * Check if each node (or one of its ancestors) is already contained in the\n     * array.\n     */\n    while (--idx >= 0) {\n        var node = nodes[idx];\n        /*\n         * Remove the node if it is not unique.\n         * We are going through the array from the end, so we only\n         * have to check nodes that preceed the node under consideration in the array.\n         */\n        if (idx > 0 && nodes.lastIndexOf(node, idx - 1) >= 0) {\n            nodes.splice(idx, 1);\n            continue;\n        }\n        for (var ancestor = node.parent; ancestor; ancestor = ancestor.parent) {\n            if (nodes.includes(ancestor)) {\n                nodes.splice(idx, 1);\n                break;\n            }\n        }\n    }\n    return nodes;\n}\nexports.removeSubsets = removeSubsets;\n/**\n * Compare the position of one node against another node in any other document.\n * The return value is a bitmask with the following values:\n *\n * Document order:\n * > There is an ordering, document order, defined on all the nodes in the\n * > document corresponding to the order in which the first character of the\n * > XML representation of each node occurs in the XML representation of the\n * > document after expansion of general entities. Thus, the document element\n * > node will be the first node. Element nodes occur before their children.\n * > Thus, document order orders element nodes in order of the occurrence of\n * > their start-tag in the XML (after expansion of entities). The attribute\n * > nodes of an element occur after the element and before its children. The\n * > relative order of attribute nodes is implementation-dependent./\n *\n * Source:\n * http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n *\n * @param nodeA The first node to use in the comparison\n * @param nodeB The second node to use in the comparison\n * @returns A bitmask describing the input nodes' relative position.\n *\n * See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n * a description of these values.\n */\nfunction compareDocumentPosition(nodeA, nodeB) {\n    var aParents = [];\n    var bParents = [];\n    if (nodeA === nodeB) {\n        return 0;\n    }\n    var current = (0, domhandler_1.hasChildren)(nodeA) ? nodeA : nodeA.parent;\n    while (current) {\n        aParents.unshift(current);\n        current = current.parent;\n    }\n    current = (0, domhandler_1.hasChildren)(nodeB) ? nodeB : nodeB.parent;\n    while (current) {\n        bParents.unshift(current);\n        current = current.parent;\n    }\n    var maxIdx = Math.min(aParents.length, bParents.length);\n    var idx = 0;\n    while (idx < maxIdx && aParents[idx] === bParents[idx]) {\n        idx++;\n    }\n    if (idx === 0) {\n        return 1 /* DISCONNECTED */;\n    }\n    var sharedParent = aParents[idx - 1];\n    var siblings = sharedParent.children;\n    var aSibling = aParents[idx];\n    var bSibling = bParents[idx];\n    if (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n        if (sharedParent === nodeB) {\n            return 4 /* FOLLOWING */ | 16 /* CONTAINED_BY */;\n        }\n        return 4 /* FOLLOWING */;\n    }\n    if (sharedParent === nodeA) {\n        return 2 /* PRECEDING */ | 8 /* CONTAINS */;\n    }\n    return 2 /* PRECEDING */;\n}\nexports.compareDocumentPosition = compareDocumentPosition;\n/**\n * Sort an array of nodes based on their relative position in the document and\n * remove any duplicate nodes. If the array contains nodes that do not belong\n * to the same document, sort order is unspecified.\n *\n * @param nodes Array of DOM nodes.\n * @returns Collection of unique nodes, sorted in document order.\n */\nfunction uniqueSort(nodes) {\n    nodes = nodes.filter(function (node, i, arr) { return !arr.includes(node, i + 1); });\n    nodes.sort(function (a, b) {\n        var relative = compareDocumentPosition(a, b);\n        if (relative & 2 /* PRECEDING */) {\n            return -1;\n        }\n        else if (relative & 4 /* FOLLOWING */) {\n            return 1;\n        }\n        return 0;\n    });\n    return nodes;\n}\nexports.uniqueSort = uniqueSort;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasChildren = exports.isDocument = exports.isComment = exports.isText = exports.isCDATA = exports.isTag = void 0;\n__exportStar(require(\"./stringify\"), exports);\n__exportStar(require(\"./traversal\"), exports);\n__exportStar(require(\"./manipulation\"), exports);\n__exportStar(require(\"./querying\"), exports);\n__exportStar(require(\"./legacy\"), exports);\n__exportStar(require(\"./helpers\"), exports);\n__exportStar(require(\"./feeds\"), exports);\n/** @deprecated Use these methods from `domhandler` directly. */\nvar domhandler_1 = require(\"domhandler\");\nObject.defineProperty(exports, \"isTag\", { enumerable: true, get: function () { return domhandler_1.isTag; } });\nObject.defineProperty(exports, \"isCDATA\", { enumerable: true, get: function () { return domhandler_1.isCDATA; } });\nObject.defineProperty(exports, \"isText\", { enumerable: true, get: function () { return domhandler_1.isText; } });\nObject.defineProperty(exports, \"isComment\", { enumerable: true, get: function () { return domhandler_1.isComment; } });\nObject.defineProperty(exports, \"isDocument\", { enumerable: true, get: function () { return domhandler_1.isDocument; } });\nObject.defineProperty(exports, \"hasChildren\", { enumerable: true, get: function () { return domhandler_1.hasChildren; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getElementsByTagType = exports.getElementsByTagName = exports.getElementById = exports.getElements = exports.testElement = void 0;\nvar domhandler_1 = require(\"domhandler\");\nvar querying_1 = require(\"./querying\");\nvar Checks = {\n    tag_name: function (name) {\n        if (typeof name === \"function\") {\n            return function (elem) { return (0, domhandler_1.isTag)(elem) && name(elem.name); };\n        }\n        else if (name === \"*\") {\n            return domhandler_1.isTag;\n        }\n        return function (elem) { return (0, domhandler_1.isTag)(elem) && elem.name === name; };\n    },\n    tag_type: function (type) {\n        if (typeof type === \"function\") {\n            return function (elem) { return type(elem.type); };\n        }\n        return function (elem) { return elem.type === type; };\n    },\n    tag_contains: function (data) {\n        if (typeof data === \"function\") {\n            return function (elem) { return (0, domhandler_1.isText)(elem) && data(elem.data); };\n        }\n        return function (elem) { return (0, domhandler_1.isText)(elem) && elem.data === data; };\n    },\n};\n/**\n * @param attrib Attribute to check.\n * @param value Attribute value to look for.\n * @returns A function to check whether the a node has an attribute with a particular value.\n */\nfunction getAttribCheck(attrib, value) {\n    if (typeof value === \"function\") {\n        return function (elem) { return (0, domhandler_1.isTag)(elem) && value(elem.attribs[attrib]); };\n    }\n    return function (elem) { return (0, domhandler_1.isTag)(elem) && elem.attribs[attrib] === value; };\n}\n/**\n * @param a First function to combine.\n * @param b Second function to combine.\n * @returns A function taking a node and returning `true` if either\n * of the input functions returns `true` for the node.\n */\nfunction combineFuncs(a, b) {\n    return function (elem) { return a(elem) || b(elem); };\n}\n/**\n * @param options An object describing nodes to look for.\n * @returns A function executing all checks in `options` and returning `true`\n * if any of them match a node.\n */\nfunction compileTest(options) {\n    var funcs = Object.keys(options).map(function (key) {\n        var value = options[key];\n        return Object.prototype.hasOwnProperty.call(Checks, key)\n            ? Checks[key](value)\n            : getAttribCheck(key, value);\n    });\n    return funcs.length === 0 ? null : funcs.reduce(combineFuncs);\n}\n/**\n * @param options An object describing nodes to look for.\n * @param node The element to test.\n * @returns Whether the element matches the description in `options`.\n */\nfunction testElement(options, node) {\n    var test = compileTest(options);\n    return test ? test(node) : true;\n}\nexports.testElement = testElement;\n/**\n * @param options An object describing nodes to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes that match `options`.\n */\nfunction getElements(options, nodes, recurse, limit) {\n    if (limit === void 0) { limit = Infinity; }\n    var test = compileTest(options);\n    return test ? (0, querying_1.filter)(test, nodes, recurse, limit) : [];\n}\nexports.getElements = getElements;\n/**\n * @param id The unique ID attribute value to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @returns The node with the supplied ID.\n */\nfunction getElementById(id, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    if (!Array.isArray(nodes))\n        nodes = [nodes];\n    return (0, querying_1.findOne)(getAttribCheck(\"id\", id), nodes, recurse);\n}\nexports.getElementById = getElementById;\n/**\n * @param tagName Tag name to search for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `tagName`.\n */\nfunction getElementsByTagName(tagName, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return (0, querying_1.filter)(Checks.tag_name(tagName), nodes, recurse, limit);\n}\nexports.getElementsByTagName = getElementsByTagName;\n/**\n * @param type Element type to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `type`.\n */\nfunction getElementsByTagType(type, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return (0, querying_1.filter)(Checks.tag_type(type), nodes, recurse, limit);\n}\nexports.getElementsByTagType = getElementsByTagType;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prepend = exports.prependChild = exports.append = exports.appendChild = exports.replaceElement = exports.removeElement = void 0;\n/**\n * Remove an element from the dom\n *\n * @param elem The element to be removed\n */\nfunction removeElement(elem) {\n    if (elem.prev)\n        elem.prev.next = elem.next;\n    if (elem.next)\n        elem.next.prev = elem.prev;\n    if (elem.parent) {\n        var childs = elem.parent.children;\n        childs.splice(childs.lastIndexOf(elem), 1);\n    }\n}\nexports.removeElement = removeElement;\n/**\n * Replace an element in the dom\n *\n * @param elem The element to be replaced\n * @param replacement The element to be added\n */\nfunction replaceElement(elem, replacement) {\n    var prev = (replacement.prev = elem.prev);\n    if (prev) {\n        prev.next = replacement;\n    }\n    var next = (replacement.next = elem.next);\n    if (next) {\n        next.prev = replacement;\n    }\n    var parent = (replacement.parent = elem.parent);\n    if (parent) {\n        var childs = parent.children;\n        childs[childs.lastIndexOf(elem)] = replacement;\n    }\n}\nexports.replaceElement = replaceElement;\n/**\n * Append a child to an element.\n *\n * @param elem The element to append to.\n * @param child The element to be added as a child.\n */\nfunction appendChild(elem, child) {\n    removeElement(child);\n    child.next = null;\n    child.parent = elem;\n    if (elem.children.push(child) > 1) {\n        var sibling = elem.children[elem.children.length - 2];\n        sibling.next = child;\n        child.prev = sibling;\n    }\n    else {\n        child.prev = null;\n    }\n}\nexports.appendChild = appendChild;\n/**\n * Append an element after another.\n *\n * @param elem The element to append after.\n * @param next The element be added.\n */\nfunction append(elem, next) {\n    removeElement(next);\n    var parent = elem.parent;\n    var currNext = elem.next;\n    next.next = currNext;\n    next.prev = elem;\n    elem.next = next;\n    next.parent = parent;\n    if (currNext) {\n        currNext.prev = next;\n        if (parent) {\n            var childs = parent.children;\n            childs.splice(childs.lastIndexOf(currNext), 0, next);\n        }\n    }\n    else if (parent) {\n        parent.children.push(next);\n    }\n}\nexports.append = append;\n/**\n * Prepend a child to an element.\n *\n * @param elem The element to prepend before.\n * @param child The element to be added as a child.\n */\nfunction prependChild(elem, child) {\n    removeElement(child);\n    child.parent = elem;\n    child.prev = null;\n    if (elem.children.unshift(child) !== 1) {\n        var sibling = elem.children[1];\n        sibling.prev = child;\n        child.next = sibling;\n    }\n    else {\n        child.next = null;\n    }\n}\nexports.prependChild = prependChild;\n/**\n * Prepend an element before another.\n *\n * @param elem The element to prepend before.\n * @param prev The element be added.\n */\nfunction prepend(elem, prev) {\n    removeElement(prev);\n    var parent = elem.parent;\n    if (parent) {\n        var childs = parent.children;\n        childs.splice(childs.indexOf(elem), 0, prev);\n    }\n    if (elem.prev) {\n        elem.prev.next = prev;\n    }\n    prev.parent = parent;\n    prev.prev = elem.prev;\n    prev.next = elem;\n    elem.prev = prev;\n}\nexports.prepend = prepend;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findAll = exports.existsOne = exports.findOne = exports.findOneChild = exports.find = exports.filter = void 0;\nvar domhandler_1 = require(\"domhandler\");\n/**\n * Search a node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param node Node to search. Will be included in the result set if it matches.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction filter(test, node, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    if (!Array.isArray(node))\n        node = [node];\n    return find(test, node, recurse, limit);\n}\nexports.filter = filter;\n/**\n * Search an array of node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction find(test, nodes, recurse, limit) {\n    var result = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var elem = nodes_1[_i];\n        if (test(elem)) {\n            result.push(elem);\n            if (--limit <= 0)\n                break;\n        }\n        if (recurse && (0, domhandler_1.hasChildren)(elem) && elem.children.length > 0) {\n            var children = find(test, elem.children, recurse, limit);\n            result.push.apply(result, children);\n            limit -= children.length;\n            if (limit <= 0)\n                break;\n        }\n    }\n    return result;\n}\nexports.find = find;\n/**\n * Finds the first element inside of an array that matches a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns The first node in the array that passes `test`.\n */\nfunction findOneChild(test, nodes) {\n    return nodes.find(test);\n}\nexports.findOneChild = findOneChild;\n/**\n * Finds one element in a tree that passes a test.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @returns The first child node that passes `test`.\n */\nfunction findOne(test, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    var elem = null;\n    for (var i = 0; i < nodes.length && !elem; i++) {\n        var checked = nodes[i];\n        if (!(0, domhandler_1.isTag)(checked)) {\n            continue;\n        }\n        else if (test(checked)) {\n            elem = checked;\n        }\n        else if (recurse && checked.children.length > 0) {\n            elem = findOne(test, checked.children);\n        }\n    }\n    return elem;\n}\nexports.findOne = findOne;\n/**\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns Whether a tree of nodes contains at least one node passing a test.\n */\nfunction existsOne(test, nodes) {\n    return nodes.some(function (checked) {\n        return (0, domhandler_1.isTag)(checked) &&\n            (test(checked) ||\n                (checked.children.length > 0 &&\n                    existsOne(test, checked.children)));\n    });\n}\nexports.existsOne = existsOne;\n/**\n * Search and array of nodes and its children for nodes passing a test function.\n *\n * Same as `find`, only with less options, leading to reduced complexity.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns All nodes passing `test`.\n */\nfunction findAll(test, nodes) {\n    var _a;\n    var result = [];\n    var stack = nodes.filter(domhandler_1.isTag);\n    var elem;\n    while ((elem = stack.shift())) {\n        var children = (_a = elem.children) === null || _a === void 0 ? void 0 : _a.filter(domhandler_1.isTag);\n        if (children && children.length > 0) {\n            stack.unshift.apply(stack, children);\n        }\n        if (test(elem))\n            result.push(elem);\n    }\n    return result;\n}\nexports.findAll = findAll;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.innerText = exports.textContent = exports.getText = exports.getInnerHTML = exports.getOuterHTML = void 0;\nvar domhandler_1 = require(\"domhandler\");\nvar dom_serializer_1 = __importDefault(require(\"dom-serializer\"));\nvar domelementtype_1 = require(\"domelementtype\");\n/**\n * @param node Node to get the outer HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s outer HTML.\n */\nfunction getOuterHTML(node, options) {\n    return (0, dom_serializer_1.default)(node, options);\n}\nexports.getOuterHTML = getOuterHTML;\n/**\n * @param node Node to get the inner HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s inner HTML.\n */\nfunction getInnerHTML(node, options) {\n    return (0, domhandler_1.hasChildren)(node)\n        ? node.children.map(function (node) { return getOuterHTML(node, options); }).join(\"\")\n        : \"\";\n}\nexports.getInnerHTML = getInnerHTML;\n/**\n * Get a node's inner text. Same as `textContent`, but inserts newlines for `<br>` tags.\n *\n * @deprecated Use `textContent` instead.\n * @param node Node to get the inner text of.\n * @returns `node`'s inner text.\n */\nfunction getText(node) {\n    if (Array.isArray(node))\n        return node.map(getText).join(\"\");\n    if ((0, domhandler_1.isTag)(node))\n        return node.name === \"br\" ? \"\\n\" : getText(node.children);\n    if ((0, domhandler_1.isCDATA)(node))\n        return getText(node.children);\n    if ((0, domhandler_1.isText)(node))\n        return node.data;\n    return \"\";\n}\nexports.getText = getText;\n/**\n * Get a node's text content.\n *\n * @param node Node to get the text content of.\n * @returns `node`'s text content.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent}\n */\nfunction textContent(node) {\n    if (Array.isArray(node))\n        return node.map(textContent).join(\"\");\n    if ((0, domhandler_1.hasChildren)(node) && !(0, domhandler_1.isComment)(node)) {\n        return textContent(node.children);\n    }\n    if ((0, domhandler_1.isText)(node))\n        return node.data;\n    return \"\";\n}\nexports.textContent = textContent;\n/**\n * Get a node's inner text.\n *\n * @param node Node to get the inner text of.\n * @returns `node`'s inner text.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Node/innerText}\n */\nfunction innerText(node) {\n    if (Array.isArray(node))\n        return node.map(innerText).join(\"\");\n    if ((0, domhandler_1.hasChildren)(node) && (node.type === domelementtype_1.ElementType.Tag || (0, domhandler_1.isCDATA)(node))) {\n        return innerText(node.children);\n    }\n    if ((0, domhandler_1.isText)(node))\n        return node.data;\n    return \"\";\n}\nexports.innerText = innerText;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prevElementSibling = exports.nextElementSibling = exports.getName = exports.hasAttrib = exports.getAttributeValue = exports.getSiblings = exports.getParent = exports.getChildren = void 0;\nvar domhandler_1 = require(\"domhandler\");\nvar emptyArray = [];\n/**\n * Get a node's children.\n *\n * @param elem Node to get the children of.\n * @returns `elem`'s children, or an empty array.\n */\nfunction getChildren(elem) {\n    var _a;\n    return (_a = elem.children) !== null && _a !== void 0 ? _a : emptyArray;\n}\nexports.getChildren = getChildren;\n/**\n * Get a node's parent.\n *\n * @param elem Node to get the parent of.\n * @returns `elem`'s parent node.\n */\nfunction getParent(elem) {\n    return elem.parent || null;\n}\nexports.getParent = getParent;\n/**\n * Gets an elements siblings, including the element itself.\n *\n * Attempts to get the children through the element's parent first.\n * If we don't have a parent (the element is a root node),\n * we walk the element's `prev` & `next` to get all remaining nodes.\n *\n * @param elem Element to get the siblings of.\n * @returns `elem`'s siblings.\n */\nfunction getSiblings(elem) {\n    var _a, _b;\n    var parent = getParent(elem);\n    if (parent != null)\n        return getChildren(parent);\n    var siblings = [elem];\n    var prev = elem.prev, next = elem.next;\n    while (prev != null) {\n        siblings.unshift(prev);\n        (_a = prev, prev = _a.prev);\n    }\n    while (next != null) {\n        siblings.push(next);\n        (_b = next, next = _b.next);\n    }\n    return siblings;\n}\nexports.getSiblings = getSiblings;\n/**\n * Gets an attribute from an element.\n *\n * @param elem Element to check.\n * @param name Attribute name to retrieve.\n * @returns The element's attribute value, or `undefined`.\n */\nfunction getAttributeValue(elem, name) {\n    var _a;\n    return (_a = elem.attribs) === null || _a === void 0 ? void 0 : _a[name];\n}\nexports.getAttributeValue = getAttributeValue;\n/**\n * Checks whether an element has an attribute.\n *\n * @param elem Element to check.\n * @param name Attribute name to look for.\n * @returns Returns whether `elem` has the attribute `name`.\n */\nfunction hasAttrib(elem, name) {\n    return (elem.attribs != null &&\n        Object.prototype.hasOwnProperty.call(elem.attribs, name) &&\n        elem.attribs[name] != null);\n}\nexports.hasAttrib = hasAttrib;\n/**\n * Get the tag name of an element.\n *\n * @param elem The element to get the name for.\n * @returns The tag name of `elem`.\n */\nfunction getName(elem) {\n    return elem.name;\n}\nexports.getName = getName;\n/**\n * Returns the next element sibling of a node.\n *\n * @param elem The element to get the next sibling of.\n * @returns `elem`'s next sibling that is a tag.\n */\nfunction nextElementSibling(elem) {\n    var _a;\n    var next = elem.next;\n    while (next !== null && !(0, domhandler_1.isTag)(next))\n        (_a = next, next = _a.next);\n    return next;\n}\nexports.nextElementSibling = nextElementSibling;\n/**\n * Returns the previous element sibling of a node.\n *\n * @param elem The element to get the previous sibling of.\n * @returns `elem`'s previous sibling that is a tag.\n */\nfunction prevElementSibling(elem) {\n    var _a;\n    var prev = elem.prev;\n    while (prev !== null && !(0, domhandler_1.isTag)(prev))\n        (_a = prev, prev = _a.prev);\n    return prev;\n}\nexports.prevElementSibling = prevElementSibling;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeHTML = exports.decodeHTMLStrict = exports.decodeXML = void 0;\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"./maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar decode_codepoint_1 = __importDefault(require(\"./decode_codepoint\"));\nvar strictEntityRe = /&(?:[a-zA-Z0-9]+|#[xX][\\da-fA-F]+|#\\d+);/g;\nexports.decodeXML = getStrictDecoder(xml_json_1.default);\nexports.decodeHTMLStrict = getStrictDecoder(entities_json_1.default);\nfunction getStrictDecoder(map) {\n    var replace = getReplacer(map);\n    return function (str) { return String(str).replace(strictEntityRe, replace); };\n}\nvar sorter = function (a, b) { return (a < b ? 1 : -1); };\nexports.decodeHTML = (function () {\n    var legacy = Object.keys(legacy_json_1.default).sort(sorter);\n    var keys = Object.keys(entities_json_1.default).sort(sorter);\n    for (var i = 0, j = 0; i < keys.length; i++) {\n        if (legacy[j] === keys[i]) {\n            keys[i] += \";?\";\n            j++;\n        }\n        else {\n            keys[i] += \";\";\n        }\n    }\n    var re = new RegExp(\"&(?:\" + keys.join(\"|\") + \"|#[xX][\\\\da-fA-F]+;?|#\\\\d+;?)\", \"g\");\n    var replace = getReplacer(entities_json_1.default);\n    function replacer(str) {\n        if (str.substr(-1) !== \";\")\n            str += \";\";\n        return replace(str);\n    }\n    // TODO consider creating a merged map\n    return function (str) { return String(str).replace(re, replacer); };\n})();\nfunction getReplacer(map) {\n    return function replace(str) {\n        if (str.charAt(1) === \"#\") {\n            var secondChar = str.charAt(2);\n            if (secondChar === \"X\" || secondChar === \"x\") {\n                return decode_codepoint_1.default(parseInt(str.substr(3), 16));\n            }\n            return decode_codepoint_1.default(parseInt(str.substr(2), 10));\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        return map[str.slice(1, -1)] || str;\n    };\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_json_1 = __importDefault(require(\"./maps/decode.json\"));\n// Adapted from https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nvar fromCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.fromCodePoint ||\n    function (codePoint) {\n        var output = \"\";\n        if (codePoint > 0xffff) {\n            codePoint -= 0x10000;\n            output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n            codePoint = 0xdc00 | (codePoint & 0x3ff);\n        }\n        output += String.fromCharCode(codePoint);\n        return output;\n    };\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n    if (codePoint in decode_json_1.default) {\n        codePoint = decode_json_1.default[codePoint];\n    }\n    return fromCodePoint(codePoint);\n}\nexports.default = decodeCodePoint;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = void 0;\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar inverseXML = getInverseObj(xml_json_1.default);\nvar xmlReplacer = getInverseReplacer(inverseXML);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using XML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeXML = getASCIIEncoder(inverseXML);\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar inverseHTML = getInverseObj(entities_json_1.default);\nvar htmlReplacer = getInverseReplacer(inverseHTML);\n/**\n * Encodes all entities and non-ASCII characters in the input.\n *\n * This includes characters that are valid ASCII characters in HTML documents.\n * For example `#` will be encoded as `&num;`. To get a more compact output,\n * consider using the `encodeNonAsciiHTML` function.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeHTML = getInverse(inverseHTML, htmlReplacer);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in HTML\n * documents using HTML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeNonAsciiHTML = getASCIIEncoder(inverseHTML);\nfunction getInverseObj(obj) {\n    return Object.keys(obj)\n        .sort()\n        .reduce(function (inverse, name) {\n        inverse[obj[name]] = \"&\" + name + \";\";\n        return inverse;\n    }, {});\n}\nfunction getInverseReplacer(inverse) {\n    var single = [];\n    var multiple = [];\n    for (var _i = 0, _a = Object.keys(inverse); _i < _a.length; _i++) {\n        var k = _a[_i];\n        if (k.length === 1) {\n            // Add value to single array\n            single.push(\"\\\\\" + k);\n        }\n        else {\n            // Add value to multiple array\n            multiple.push(k);\n        }\n    }\n    // Add ranges to single characters.\n    single.sort();\n    for (var start = 0; start < single.length - 1; start++) {\n        // Find the end of a run of characters\n        var end = start;\n        while (end < single.length - 1 &&\n            single[end].charCodeAt(1) + 1 === single[end + 1].charCodeAt(1)) {\n            end += 1;\n        }\n        var count = 1 + end - start;\n        // We want to replace at least three characters\n        if (count < 3)\n            continue;\n        single.splice(start, count, single[start] + \"-\" + single[end]);\n    }\n    multiple.unshift(\"[\" + single.join(\"\") + \"]\");\n    return new RegExp(multiple.join(\"|\"), \"g\");\n}\n// /[^\\0-\\x7F]/gu\nvar reNonASCII = /(?:[\\x80-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])/g;\nvar getCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.prototype.codePointAt != null\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        function (str) { return str.codePointAt(0); }\n    : // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        function (c) {\n            return (c.charCodeAt(0) - 0xd800) * 0x400 +\n                c.charCodeAt(1) -\n                0xdc00 +\n                0x10000;\n        };\nfunction singleCharReplacer(c) {\n    return \"&#x\" + (c.length > 1 ? getCodePoint(c) : c.charCodeAt(0))\n        .toString(16)\n        .toUpperCase() + \";\";\n}\nfunction getInverse(inverse, re) {\n    return function (data) {\n        return data\n            .replace(re, function (name) { return inverse[name]; })\n            .replace(reNonASCII, singleCharReplacer);\n    };\n}\nvar reEscapeChars = new RegExp(xmlReplacer.source + \"|\" + reNonASCII.source, \"g\");\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using numeric hexadecimal reference (eg. `&#xfc;`).\n *\n * Have a look at `escapeUTF8` if you want a more concise output at the expense\n * of reduced transportability.\n *\n * @param data String to escape.\n */\nfunction escape(data) {\n    return data.replace(reEscapeChars, singleCharReplacer);\n}\nexports.escape = escape;\n/**\n * Encodes all characters not valid in XML documents using numeric hexadecimal\n * reference (eg. `&#xfc;`).\n *\n * Note that the output will be character-set dependent.\n *\n * @param data String to escape.\n */\nfunction escapeUTF8(data) {\n    return data.replace(xmlReplacer, singleCharReplacer);\n}\nexports.escapeUTF8 = escapeUTF8;\nfunction getASCIIEncoder(obj) {\n    return function (data) {\n        return data.replace(reEscapeChars, function (c) { return obj[c] || singleCharReplacer(c); });\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeXMLStrict = exports.decodeHTML5Strict = exports.decodeHTML4Strict = exports.decodeHTML5 = exports.decodeHTML4 = exports.decodeHTMLStrict = exports.decodeHTML = exports.decodeXML = exports.encodeHTML5 = exports.encodeHTML4 = exports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = exports.encode = exports.decodeStrict = exports.decode = void 0;\nvar decode_1 = require(\"./decode\");\nvar encode_1 = require(\"./encode\");\n/**\n * Decodes a string with entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeXML` or `decodeHTML` directly.\n */\nfunction decode(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTML)(data);\n}\nexports.decode = decode;\n/**\n * Decodes a string with entities. Does not allow missing trailing semicolons for entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeHTMLStrict` or `decodeXML` directly.\n */\nfunction decodeStrict(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTMLStrict)(data);\n}\nexports.decodeStrict = decodeStrict;\n/**\n * Encodes a string with entities.\n *\n * @param data String to encode.\n * @param level Optional level to encode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `encodeHTML`, `encodeXML` or `encodeNonAsciiHTML` directly.\n */\nfunction encode(data, level) {\n    return (!level || level <= 0 ? encode_1.encodeXML : encode_1.encodeHTML)(data);\n}\nexports.encode = encode;\nvar encode_2 = require(\"./encode\");\nObject.defineProperty(exports, \"encodeXML\", { enumerable: true, get: function () { return encode_2.encodeXML; } });\nObject.defineProperty(exports, \"encodeHTML\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeNonAsciiHTML\", { enumerable: true, get: function () { return encode_2.encodeNonAsciiHTML; } });\nObject.defineProperty(exports, \"escape\", { enumerable: true, get: function () { return encode_2.escape; } });\nObject.defineProperty(exports, \"escapeUTF8\", { enumerable: true, get: function () { return encode_2.escapeUTF8; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"encodeHTML4\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeHTML5\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nvar decode_2 = require(\"./decode\");\nObject.defineProperty(exports, \"decodeXML\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\nObject.defineProperty(exports, \"decodeHTML\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTMLStrict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"decodeHTML4\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML5\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML4Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeHTML5Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeXMLStrict\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFeed = exports.FeedHandler = void 0;\nvar domhandler_1 = __importDefault(require(\"domhandler\"));\nvar DomUtils = __importStar(require(\"domutils\"));\nvar Parser_1 = require(\"./Parser\");\nvar FeedItemMediaMedium;\n(function (FeedItemMediaMedium) {\n    FeedItemMediaMedium[FeedItemMediaMedium[\"image\"] = 0] = \"image\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"audio\"] = 1] = \"audio\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"video\"] = 2] = \"video\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"document\"] = 3] = \"document\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"executable\"] = 4] = \"executable\";\n})(FeedItemMediaMedium || (FeedItemMediaMedium = {}));\nvar FeedItemMediaExpression;\n(function (FeedItemMediaExpression) {\n    FeedItemMediaExpression[FeedItemMediaExpression[\"sample\"] = 0] = \"sample\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"full\"] = 1] = \"full\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"nonstop\"] = 2] = \"nonstop\";\n})(FeedItemMediaExpression || (FeedItemMediaExpression = {}));\n// TODO: Consume data as it is coming in\nvar FeedHandler = /** @class */ (function (_super) {\n    __extends(FeedHandler, _super);\n    /**\n     *\n     * @param callback\n     * @param options\n     */\n    function FeedHandler(callback, options) {\n        var _this = this;\n        if (typeof callback === \"object\") {\n            callback = undefined;\n            options = callback;\n        }\n        _this = _super.call(this, callback, options) || this;\n        return _this;\n    }\n    FeedHandler.prototype.onend = function () {\n        var _a, _b;\n        var feedRoot = getOneElement(isValidFeed, this.dom);\n        if (!feedRoot) {\n            this.handleCallback(new Error(\"couldn't find root of feed\"));\n            return;\n        }\n        var feed = {};\n        if (feedRoot.name === \"feed\") {\n            var childs = feedRoot.children;\n            feed.type = \"atom\";\n            addConditionally(feed, \"id\", \"id\", childs);\n            addConditionally(feed, \"title\", \"title\", childs);\n            var href = getAttribute(\"href\", getOneElement(\"link\", childs));\n            if (href) {\n                feed.link = href;\n            }\n            addConditionally(feed, \"description\", \"subtitle\", childs);\n            var updated = fetch(\"updated\", childs);\n            if (updated) {\n                feed.updated = new Date(updated);\n            }\n            addConditionally(feed, \"author\", \"email\", childs, true);\n            feed.items = getElements(\"entry\", childs).map(function (item) {\n                var entry = {};\n                var children = item.children;\n                addConditionally(entry, \"id\", \"id\", children);\n                addConditionally(entry, \"title\", \"title\", children);\n                var href = getAttribute(\"href\", getOneElement(\"link\", children));\n                if (href) {\n                    entry.link = href;\n                }\n                var description = fetch(\"summary\", children) || fetch(\"content\", children);\n                if (description) {\n                    entry.description = description;\n                }\n                var pubDate = fetch(\"updated\", children);\n                if (pubDate) {\n                    entry.pubDate = new Date(pubDate);\n                }\n                entry.media = getMediaElements(children);\n                return entry;\n            });\n        }\n        else {\n            var childs = (_b = (_a = getOneElement(\"channel\", feedRoot.children)) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : [];\n            feed.type = feedRoot.name.substr(0, 3);\n            feed.id = \"\";\n            addConditionally(feed, \"title\", \"title\", childs);\n            addConditionally(feed, \"link\", \"link\", childs);\n            addConditionally(feed, \"description\", \"description\", childs);\n            var updated = fetch(\"lastBuildDate\", childs);\n            if (updated) {\n                feed.updated = new Date(updated);\n            }\n            addConditionally(feed, \"author\", \"managingEditor\", childs, true);\n            feed.items = getElements(\"item\", feedRoot.children).map(function (item) {\n                var entry = {};\n                var children = item.children;\n                addConditionally(entry, \"id\", \"guid\", children);\n                addConditionally(entry, \"title\", \"title\", children);\n                addConditionally(entry, \"link\", \"link\", children);\n                addConditionally(entry, \"description\", \"description\", children);\n                var pubDate = fetch(\"pubDate\", children);\n                if (pubDate)\n                    entry.pubDate = new Date(pubDate);\n                entry.media = getMediaElements(children);\n                return entry;\n            });\n        }\n        this.feed = feed;\n        this.handleCallback(null);\n    };\n    return FeedHandler;\n}(domhandler_1.default));\nexports.FeedHandler = FeedHandler;\nfunction getMediaElements(where) {\n    return getElements(\"media:content\", where).map(function (elem) {\n        var media = {\n            medium: elem.attribs.medium,\n            isDefault: !!elem.attribs.isDefault,\n        };\n        if (elem.attribs.url) {\n            media.url = elem.attribs.url;\n        }\n        if (elem.attribs.fileSize) {\n            media.fileSize = parseInt(elem.attribs.fileSize, 10);\n        }\n        if (elem.attribs.type) {\n            media.type = elem.attribs.type;\n        }\n        if (elem.attribs.expression) {\n            media.expression = elem.attribs\n                .expression;\n        }\n        if (elem.attribs.bitrate) {\n            media.bitrate = parseInt(elem.attribs.bitrate, 10);\n        }\n        if (elem.attribs.framerate) {\n            media.framerate = parseInt(elem.attribs.framerate, 10);\n        }\n        if (elem.attribs.samplingrate) {\n            media.samplingrate = parseInt(elem.attribs.samplingrate, 10);\n        }\n        if (elem.attribs.channels) {\n            media.channels = parseInt(elem.attribs.channels, 10);\n        }\n        if (elem.attribs.duration) {\n            media.duration = parseInt(elem.attribs.duration, 10);\n        }\n        if (elem.attribs.height) {\n            media.height = parseInt(elem.attribs.height, 10);\n        }\n        if (elem.attribs.width) {\n            media.width = parseInt(elem.attribs.width, 10);\n        }\n        if (elem.attribs.lang) {\n            media.lang = elem.attribs.lang;\n        }\n        return media;\n    });\n}\nfunction getElements(tagName, where) {\n    return DomUtils.getElementsByTagName(tagName, where, true);\n}\nfunction getOneElement(tagName, node) {\n    return DomUtils.getElementsByTagName(tagName, node, true, 1)[0];\n}\nfunction fetch(tagName, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    return DomUtils.getText(DomUtils.getElementsByTagName(tagName, where, recurse, 1)).trim();\n}\nfunction getAttribute(name, elem) {\n    if (!elem) {\n        return null;\n    }\n    var attribs = elem.attribs;\n    return attribs[name];\n}\nfunction addConditionally(obj, prop, what, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    var tmp = fetch(what, where, recurse);\n    if (tmp)\n        obj[prop] = tmp;\n}\nfunction isValidFeed(value) {\n    return value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n}\n/**\n * Parse a feed.\n *\n * @param feed The feed that should be parsed, as a string.\n * @param options Optionally, options for parsing. When using this option, you should set `xmlMode` to `true`.\n */\nfunction parseFeed(feed, options) {\n    if (options === void 0) { options = { xmlMode: true }; }\n    var handler = new FeedHandler(options);\n    new Parser_1.Parser(handler, options).end(feed);\n    return handler.feed;\n}\nexports.parseFeed = parseFeed;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nvar Tokenizer_1 = __importDefault(require(\"./Tokenizer\"));\nvar formTags = new Set([\n    \"input\",\n    \"option\",\n    \"optgroup\",\n    \"select\",\n    \"button\",\n    \"datalist\",\n    \"textarea\",\n]);\nvar pTag = new Set([\"p\"]);\nvar openImpliesClose = {\n    tr: new Set([\"tr\", \"th\", \"td\"]),\n    th: new Set([\"th\"]),\n    td: new Set([\"thead\", \"th\", \"td\"]),\n    body: new Set([\"head\", \"link\", \"script\"]),\n    li: new Set([\"li\"]),\n    p: pTag,\n    h1: pTag,\n    h2: pTag,\n    h3: pTag,\n    h4: pTag,\n    h5: pTag,\n    h6: pTag,\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: new Set([\"option\"]),\n    optgroup: new Set([\"optgroup\", \"option\"]),\n    dd: new Set([\"dt\", \"dd\"]),\n    dt: new Set([\"dt\", \"dd\"]),\n    address: pTag,\n    article: pTag,\n    aside: pTag,\n    blockquote: pTag,\n    details: pTag,\n    div: pTag,\n    dl: pTag,\n    fieldset: pTag,\n    figcaption: pTag,\n    figure: pTag,\n    footer: pTag,\n    form: pTag,\n    header: pTag,\n    hr: pTag,\n    main: pTag,\n    nav: pTag,\n    ol: pTag,\n    pre: pTag,\n    section: pTag,\n    table: pTag,\n    ul: pTag,\n    rt: new Set([\"rt\", \"rp\"]),\n    rp: new Set([\"rt\", \"rp\"]),\n    tbody: new Set([\"thead\", \"tbody\"]),\n    tfoot: new Set([\"thead\", \"tbody\"]),\n};\nvar voidElements = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\nvar foreignContextElements = new Set([\"math\", \"svg\"]);\nvar htmlIntegrationElements = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar reNameEnd = /\\s|\\//;\nvar Parser = /** @class */ (function () {\n    function Parser(cbs, options) {\n        if (options === void 0) { options = {}; }\n        var _a, _b, _c, _d, _e;\n        /** The start index of the last event. */\n        this.startIndex = 0;\n        /** The end index of the last event. */\n        this.endIndex = null;\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n        this.attribs = null;\n        this.stack = [];\n        this.foreignContext = [];\n        this.options = options;\n        this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n        this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n        this.lowerCaseAttributeNames =\n            (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n        this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer_1.default)(this.options, this);\n        (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n    }\n    Parser.prototype.updatePosition = function (initialOffset) {\n        if (this.endIndex === null) {\n            if (this.tokenizer.sectionStart <= initialOffset) {\n                this.startIndex = 0;\n            }\n            else {\n                this.startIndex = this.tokenizer.sectionStart - initialOffset;\n            }\n        }\n        else {\n            this.startIndex = this.endIndex + 1;\n        }\n        this.endIndex = this.tokenizer.getAbsoluteIndex();\n    };\n    // Tokenizer event handlers\n    Parser.prototype.ontext = function (data) {\n        var _a, _b;\n        this.updatePosition(1);\n        this.endIndex--;\n        (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n    };\n    Parser.prototype.onopentagname = function (name) {\n        var _a, _b;\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        this.tagname = name;\n        if (!this.options.xmlMode &&\n            Object.prototype.hasOwnProperty.call(openImpliesClose, name)) {\n            var el = void 0;\n            while (this.stack.length > 0 &&\n                openImpliesClose[name].has((el = this.stack[this.stack.length - 1]))) {\n                this.onclosetag(el);\n            }\n        }\n        if (this.options.xmlMode || !voidElements.has(name)) {\n            this.stack.push(name);\n            if (foreignContextElements.has(name)) {\n                this.foreignContext.push(true);\n            }\n            else if (htmlIntegrationElements.has(name)) {\n                this.foreignContext.push(false);\n            }\n        }\n        (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n        if (this.cbs.onopentag)\n            this.attribs = {};\n    };\n    Parser.prototype.onopentagend = function () {\n        var _a, _b;\n        this.updatePosition(1);\n        if (this.attribs) {\n            (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs);\n            this.attribs = null;\n        }\n        if (!this.options.xmlMode &&\n            this.cbs.onclosetag &&\n            voidElements.has(this.tagname)) {\n            this.cbs.onclosetag(this.tagname);\n        }\n        this.tagname = \"\";\n    };\n    Parser.prototype.onclosetag = function (name) {\n        this.updatePosition(1);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        if (foreignContextElements.has(name) ||\n            htmlIntegrationElements.has(name)) {\n            this.foreignContext.pop();\n        }\n        if (this.stack.length &&\n            (this.options.xmlMode || !voidElements.has(name))) {\n            var pos = this.stack.lastIndexOf(name);\n            if (pos !== -1) {\n                if (this.cbs.onclosetag) {\n                    pos = this.stack.length - pos;\n                    while (pos--) {\n                        // We know the stack has sufficient elements.\n                        this.cbs.onclosetag(this.stack.pop());\n                    }\n                }\n                else\n                    this.stack.length = pos;\n            }\n            else if (name === \"p\" && !this.options.xmlMode) {\n                this.onopentagname(name);\n                this.closeCurrentTag();\n            }\n        }\n        else if (!this.options.xmlMode && (name === \"br\" || name === \"p\")) {\n            this.onopentagname(name);\n            this.closeCurrentTag();\n        }\n    };\n    Parser.prototype.onselfclosingtag = function () {\n        if (this.options.xmlMode ||\n            this.options.recognizeSelfClosing ||\n            this.foreignContext[this.foreignContext.length - 1]) {\n            this.closeCurrentTag();\n        }\n        else {\n            this.onopentagend();\n        }\n    };\n    Parser.prototype.closeCurrentTag = function () {\n        var _a, _b;\n        var name = this.tagname;\n        this.onopentagend();\n        /*\n         * Self-closing tags will be on the top of the stack\n         * (cheaper check than in onclosetag)\n         */\n        if (this.stack[this.stack.length - 1] === name) {\n            (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n            this.stack.pop();\n        }\n    };\n    Parser.prototype.onattribname = function (name) {\n        if (this.lowerCaseAttributeNames) {\n            name = name.toLowerCase();\n        }\n        this.attribname = name;\n    };\n    Parser.prototype.onattribdata = function (value) {\n        this.attribvalue += value;\n    };\n    Parser.prototype.onattribend = function (quote) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote);\n        if (this.attribs &&\n            !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n            this.attribs[this.attribname] = this.attribvalue;\n        }\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n    };\n    Parser.prototype.getInstructionName = function (value) {\n        var idx = value.search(reNameEnd);\n        var name = idx < 0 ? value : value.substr(0, idx);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        return name;\n    };\n    Parser.prototype.ondeclaration = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_1 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"!\" + name_1, \"!\" + value);\n        }\n    };\n    Parser.prototype.onprocessinginstruction = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_2 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"?\" + name_2, \"?\" + value);\n        }\n    };\n    Parser.prototype.oncomment = function (value) {\n        var _a, _b, _c, _d;\n        this.updatePosition(4);\n        (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n        (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c);\n    };\n    Parser.prototype.oncdata = function (value) {\n        var _a, _b, _c, _d, _e, _f;\n        this.updatePosition(1);\n        if (this.options.xmlMode || this.options.recognizeCDATA) {\n            (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n            (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n        }\n        else {\n            this.oncomment(\"[CDATA[\" + value + \"]]\");\n        }\n    };\n    Parser.prototype.onerror = function (err) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    Parser.prototype.onend = function () {\n        var _a, _b;\n        if (this.cbs.onclosetag) {\n            for (var i = this.stack.length; i > 0; this.cbs.onclosetag(this.stack[--i]))\n                ;\n        }\n        (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    /**\n     * Resets the parser to a blank state, ready to parse a new HTML document\n     */\n    Parser.prototype.reset = function () {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.tokenizer.reset();\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribs = null;\n        this.stack = [];\n        (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n    };\n    /**\n     * Resets the parser, then parses a complete document and\n     * pushes it to the handler.\n     *\n     * @param data Document to parse.\n     */\n    Parser.prototype.parseComplete = function (data) {\n        this.reset();\n        this.end(data);\n    };\n    /**\n     * Parses a chunk of data and calls the corresponding callbacks.\n     *\n     * @param chunk Chunk to parse.\n     */\n    Parser.prototype.write = function (chunk) {\n        this.tokenizer.write(chunk);\n    };\n    /**\n     * Parses the end of the buffer and clears the stack, calls onend.\n     *\n     * @param chunk Optional final chunk to parse.\n     */\n    Parser.prototype.end = function (chunk) {\n        this.tokenizer.end(chunk);\n    };\n    /**\n     * Pauses parsing. The parser won't emit events until `resume` is called.\n     */\n    Parser.prototype.pause = function () {\n        this.tokenizer.pause();\n    };\n    /**\n     * Resumes parsing after `pause` was called.\n     */\n    Parser.prototype.resume = function () {\n        this.tokenizer.resume();\n    };\n    /**\n     * Alias of `write`, for backwards compatibility.\n     *\n     * @param chunk Chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.parseChunk = function (chunk) {\n        this.write(chunk);\n    };\n    /**\n     * Alias of `end`, for backwards compatibility.\n     *\n     * @param chunk Optional final chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.done = function (chunk) {\n        this.end(chunk);\n    };\n    return Parser;\n}());\nexports.Parser = Parser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_codepoint_1 = __importDefault(require(\"entities/lib/decode_codepoint\"));\nvar entities_json_1 = __importDefault(require(\"entities/lib/maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"entities/lib/maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"entities/lib/maps/xml.json\"));\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\nfunction isASCIIAlpha(c) {\n    return (c >= \"a\" && c <= \"z\") || (c >= \"A\" && c <= \"Z\");\n}\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n    if (upper === lower) {\n        return function (t, c) {\n            if (c === lower) {\n                t._state = SUCCESS;\n            }\n            else {\n                t._state = FAILURE;\n                t._index--;\n            }\n        };\n    }\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = SUCCESS;\n        }\n        else {\n            t._state = FAILURE;\n            t._index--;\n        }\n    };\n}\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = NEXT_STATE;\n        }\n        else {\n            t._state = 3 /* InTagName */;\n            t._index--; // Consume the token again\n        }\n    };\n}\nvar stateBeforeCdata1 = ifElseState(\"C\", 24 /* BeforeCdata2 */, 16 /* InDeclaration */);\nvar stateBeforeCdata2 = ifElseState(\"D\", 25 /* BeforeCdata3 */, 16 /* InDeclaration */);\nvar stateBeforeCdata3 = ifElseState(\"A\", 26 /* BeforeCdata4 */, 16 /* InDeclaration */);\nvar stateBeforeCdata4 = ifElseState(\"T\", 27 /* BeforeCdata5 */, 16 /* InDeclaration */);\nvar stateBeforeCdata5 = ifElseState(\"A\", 28 /* BeforeCdata6 */, 16 /* InDeclaration */);\nvar stateBeforeScript1 = consumeSpecialNameChar(\"R\", 35 /* BeforeScript2 */);\nvar stateBeforeScript2 = consumeSpecialNameChar(\"I\", 36 /* BeforeScript3 */);\nvar stateBeforeScript3 = consumeSpecialNameChar(\"P\", 37 /* BeforeScript4 */);\nvar stateBeforeScript4 = consumeSpecialNameChar(\"T\", 38 /* BeforeScript5 */);\nvar stateAfterScript1 = ifElseState(\"R\", 40 /* AfterScript2 */, 1 /* Text */);\nvar stateAfterScript2 = ifElseState(\"I\", 41 /* AfterScript3 */, 1 /* Text */);\nvar stateAfterScript3 = ifElseState(\"P\", 42 /* AfterScript4 */, 1 /* Text */);\nvar stateAfterScript4 = ifElseState(\"T\", 43 /* AfterScript5 */, 1 /* Text */);\nvar stateBeforeStyle1 = consumeSpecialNameChar(\"Y\", 45 /* BeforeStyle2 */);\nvar stateBeforeStyle2 = consumeSpecialNameChar(\"L\", 46 /* BeforeStyle3 */);\nvar stateBeforeStyle3 = consumeSpecialNameChar(\"E\", 47 /* BeforeStyle4 */);\nvar stateAfterStyle1 = ifElseState(\"Y\", 49 /* AfterStyle2 */, 1 /* Text */);\nvar stateAfterStyle2 = ifElseState(\"L\", 50 /* AfterStyle3 */, 1 /* Text */);\nvar stateAfterStyle3 = ifElseState(\"E\", 51 /* AfterStyle4 */, 1 /* Text */);\nvar stateBeforeSpecialT = consumeSpecialNameChar(\"I\", 54 /* BeforeTitle1 */);\nvar stateBeforeTitle1 = consumeSpecialNameChar(\"T\", 55 /* BeforeTitle2 */);\nvar stateBeforeTitle2 = consumeSpecialNameChar(\"L\", 56 /* BeforeTitle3 */);\nvar stateBeforeTitle3 = consumeSpecialNameChar(\"E\", 57 /* BeforeTitle4 */);\nvar stateAfterSpecialTEnd = ifElseState(\"I\", 58 /* AfterTitle1 */, 1 /* Text */);\nvar stateAfterTitle1 = ifElseState(\"T\", 59 /* AfterTitle2 */, 1 /* Text */);\nvar stateAfterTitle2 = ifElseState(\"L\", 60 /* AfterTitle3 */, 1 /* Text */);\nvar stateAfterTitle3 = ifElseState(\"E\", 61 /* AfterTitle4 */, 1 /* Text */);\nvar stateBeforeEntity = ifElseState(\"#\", 63 /* BeforeNumericEntity */, 64 /* InNamedEntity */);\nvar stateBeforeNumericEntity = ifElseState(\"X\", 66 /* InHexEntity */, 65 /* InNumericEntity */);\nvar Tokenizer = /** @class */ (function () {\n    function Tokenizer(options, cbs) {\n        var _a;\n        /** The current state the tokenizer is in. */\n        this._state = 1 /* Text */;\n        /** The read buffer. */\n        this.buffer = \"\";\n        /** The beginning of the section that is currently being read. */\n        this.sectionStart = 0;\n        /** The index within the buffer that we are currently looking at. */\n        this._index = 0;\n        /**\n         * Data that has already been processed will be removed from the buffer occasionally.\n         * `_bufferOffset` keeps track of how many characters have been removed, to make sure position information is accurate.\n         */\n        this.bufferOffset = 0;\n        /** Some behavior, eg. when decoding entities, is done while we are in another state. This keeps track of the other state type. */\n        this.baseState = 1 /* Text */;\n        /** For special parsing behavior inside of script and style tags. */\n        this.special = 1 /* None */;\n        /** Indicates whether the tokenizer has been paused. */\n        this.running = true;\n        /** Indicates whether the tokenizer has finished running / `.end` has been called. */\n        this.ended = false;\n        this.cbs = cbs;\n        this.xmlMode = !!(options === null || options === void 0 ? void 0 : options.xmlMode);\n        this.decodeEntities = (_a = options === null || options === void 0 ? void 0 : options.decodeEntities) !== null && _a !== void 0 ? _a : true;\n    }\n    Tokenizer.prototype.reset = function () {\n        this._state = 1 /* Text */;\n        this.buffer = \"\";\n        this.sectionStart = 0;\n        this._index = 0;\n        this.bufferOffset = 0;\n        this.baseState = 1 /* Text */;\n        this.special = 1 /* None */;\n        this.running = true;\n        this.ended = false;\n    };\n    Tokenizer.prototype.write = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".write() after done!\"));\n        this.buffer += chunk;\n        this.parse();\n    };\n    Tokenizer.prototype.end = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".end() after done!\"));\n        if (chunk)\n            this.write(chunk);\n        this.ended = true;\n        if (this.running)\n            this.finish();\n    };\n    Tokenizer.prototype.pause = function () {\n        this.running = false;\n    };\n    Tokenizer.prototype.resume = function () {\n        this.running = true;\n        if (this._index < this.buffer.length) {\n            this.parse();\n        }\n        if (this.ended) {\n            this.finish();\n        }\n    };\n    /**\n     * The current index within all of the written data.\n     */\n    Tokenizer.prototype.getAbsoluteIndex = function () {\n        return this.bufferOffset + this._index;\n    };\n    Tokenizer.prototype.stateText = function (c) {\n        if (c === \"<\") {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this._state = 2 /* BeforeTagName */;\n            this.sectionStart = this._index;\n        }\n        else if (this.decodeEntities &&\n            c === \"&\" &&\n            (this.special === 1 /* None */ || this.special === 4 /* Title */)) {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this.baseState = 1 /* Text */;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    /**\n     * HTML only allows ASCII alpha characters (a-z and A-Z) at the beginning of a tag name.\n     *\n     * XML allows a lot more characters here (@see https://www.w3.org/TR/REC-xml/#NT-NameStartChar).\n     * We allow anything that wouldn't end the tag.\n     */\n    Tokenizer.prototype.isTagStartChar = function (c) {\n        return (isASCIIAlpha(c) ||\n            (this.xmlMode && !whitespace(c) && c !== \"/\" && c !== \">\"));\n    };\n    Tokenizer.prototype.stateBeforeTagName = function (c) {\n        if (c === \"/\") {\n            this._state = 5 /* BeforeClosingTagName */;\n        }\n        else if (c === \"<\") {\n            this.cbs.ontext(this.getSection());\n            this.sectionStart = this._index;\n        }\n        else if (c === \">\" ||\n            this.special !== 1 /* None */ ||\n            whitespace(c)) {\n            this._state = 1 /* Text */;\n        }\n        else if (c === \"!\") {\n            this._state = 15 /* BeforeDeclaration */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"?\") {\n            this._state = 17 /* InProcessingInstruction */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!this.isTagStartChar(c)) {\n            this._state = 1 /* Text */;\n        }\n        else {\n            this._state =\n                !this.xmlMode && (c === \"s\" || c === \"S\")\n                    ? 32 /* BeforeSpecialS */\n                    : !this.xmlMode && (c === \"t\" || c === \"T\")\n                        ? 52 /* BeforeSpecialT */\n                        : 3 /* InTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInTagName = function (c) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.emitToken(\"onopentagname\");\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateBeforeClosingTagName = function (c) {\n        if (whitespace(c)) {\n            // Ignore\n        }\n        else if (c === \">\") {\n            this._state = 1 /* Text */;\n        }\n        else if (this.special !== 1 /* None */) {\n            if (this.special !== 4 /* Title */ && (c === \"s\" || c === \"S\")) {\n                this._state = 33 /* BeforeSpecialSEnd */;\n            }\n            else if (this.special === 4 /* Title */ &&\n                (c === \"t\" || c === \"T\")) {\n                this._state = 53 /* BeforeSpecialTEnd */;\n            }\n            else {\n                this._state = 1 /* Text */;\n                this._index--;\n            }\n        }\n        else if (!this.isTagStartChar(c)) {\n            this._state = 20 /* InSpecialComment */;\n            this.sectionStart = this._index;\n        }\n        else {\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInClosingTagName = function (c) {\n        if (c === \">\" || whitespace(c)) {\n            this.emitToken(\"onclosetag\");\n            this._state = 7 /* AfterClosingTagName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterClosingTagName = function (c) {\n        // Skip everything until \">\"\n        if (c === \">\") {\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeName = function (c) {\n        if (c === \">\") {\n            this.cbs.onopentagend();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"/\") {\n            this._state = 4 /* InSelfClosingTag */;\n        }\n        else if (!whitespace(c)) {\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInSelfClosingTag = function (c) {\n        if (c === \">\") {\n            this.cbs.onselfclosingtag();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n            this.special = 1 /* None */; // Reset special state, in case of self-closing special tags\n        }\n        else if (!whitespace(c)) {\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeName = function (c) {\n        if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n            this.cbs.onattribname(this.getSection());\n            this.sectionStart = -1;\n            this._state = 10 /* AfterAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterAttributeName = function (c) {\n        if (c === \"=\") {\n            this._state = 11 /* BeforeAttributeValue */;\n        }\n        else if (c === \"/\" || c === \">\") {\n            this.cbs.onattribend(undefined);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (!whitespace(c)) {\n            this.cbs.onattribend(undefined);\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeValue = function (c) {\n        if (c === '\"') {\n            this._state = 12 /* InAttributeValueDq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"'\") {\n            this._state = 13 /* InAttributeValueSq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!whitespace(c)) {\n            this._state = 14 /* InAttributeValueNq */;\n            this.sectionStart = this._index;\n            this._index--; // Reconsume token\n        }\n    };\n    Tokenizer.prototype.handleInAttributeValue = function (c, quote) {\n        if (c === quote) {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(quote);\n            this._state = 8 /* BeforeAttributeName */;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeValueDoubleQuotes = function (c) {\n        this.handleInAttributeValue(c, '\"');\n    };\n    Tokenizer.prototype.stateInAttributeValueSingleQuotes = function (c) {\n        this.handleInAttributeValue(c, \"'\");\n    };\n    Tokenizer.prototype.stateInAttributeValueNoQuotes = function (c) {\n        if (whitespace(c) || c === \">\") {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(null);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeDeclaration = function (c) {\n        this._state =\n            c === \"[\"\n                ? 23 /* BeforeCdata1 */\n                : c === \"-\"\n                    ? 18 /* BeforeComment */\n                    : 16 /* InDeclaration */;\n    };\n    Tokenizer.prototype.stateInDeclaration = function (c) {\n        if (c === \">\") {\n            this.cbs.ondeclaration(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateInProcessingInstruction = function (c) {\n        if (c === \">\") {\n            this.cbs.onprocessinginstruction(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeComment = function (c) {\n        if (c === \"-\") {\n            this._state = 19 /* InComment */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n        }\n    };\n    Tokenizer.prototype.stateInComment = function (c) {\n        if (c === \"-\")\n            this._state = 21 /* AfterComment1 */;\n    };\n    Tokenizer.prototype.stateInSpecialComment = function (c) {\n        if (c === \">\") {\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment1 = function (c) {\n        if (c === \"-\") {\n            this._state = 22 /* AfterComment2 */;\n        }\n        else {\n            this._state = 19 /* InComment */;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"-\") {\n            this._state = 19 /* InComment */;\n        }\n        // Else: stay in AFTER_COMMENT_2 (`--->`)\n    };\n    Tokenizer.prototype.stateBeforeCdata6 = function (c) {\n        if (c === \"[\") {\n            this._state = 29 /* InCdata */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInCdata = function (c) {\n        if (c === \"]\")\n            this._state = 30 /* AfterCdata1 */;\n    };\n    Tokenizer.prototype.stateAfterCdata1 = function (c) {\n        if (c === \"]\")\n            this._state = 31 /* AfterCdata2 */;\n        else\n            this._state = 29 /* InCdata */;\n    };\n    Tokenizer.prototype.stateAfterCdata2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncdata(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"]\") {\n            this._state = 29 /* InCdata */;\n        }\n        // Else: stay in AFTER_CDATA_2 (`]]]>`)\n    };\n    Tokenizer.prototype.stateBeforeSpecialS = function (c) {\n        if (c === \"c\" || c === \"C\") {\n            this._state = 34 /* BeforeScript1 */;\n        }\n        else if (c === \"t\" || c === \"T\") {\n            this._state = 44 /* BeforeStyle1 */;\n        }\n        else {\n            this._state = 3 /* InTagName */;\n            this._index--; // Consume the token again\n        }\n    };\n    Tokenizer.prototype.stateBeforeSpecialSEnd = function (c) {\n        if (this.special === 2 /* Script */ && (c === \"c\" || c === \"C\")) {\n            this._state = 39 /* AfterScript1 */;\n        }\n        else if (this.special === 3 /* Style */ && (c === \"t\" || c === \"T\")) {\n            this._state = 48 /* AfterStyle1 */;\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    Tokenizer.prototype.stateBeforeSpecialLast = function (c, special) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.special = special;\n        }\n        this._state = 3 /* InTagName */;\n        this._index--; // Consume the token again\n    };\n    Tokenizer.prototype.stateAfterSpecialLast = function (c, sectionStartOffset) {\n        if (c === \">\" || whitespace(c)) {\n            this.special = 1 /* None */;\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index - sectionStartOffset;\n            this._index--; // Reconsume the token\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    // For entities terminated with a semicolon\n    Tokenizer.prototype.parseFixedEntity = function (map) {\n        if (map === void 0) { map = this.xmlMode ? xml_json_1.default : entities_json_1.default; }\n        // Offset = 1\n        if (this.sectionStart + 1 < this._index) {\n            var entity = this.buffer.substring(this.sectionStart + 1, this._index);\n            if (Object.prototype.hasOwnProperty.call(map, entity)) {\n                this.emitPartial(map[entity]);\n                this.sectionStart = this._index + 1;\n            }\n        }\n    };\n    // Parses legacy entities (without trailing semicolon)\n    Tokenizer.prototype.parseLegacyEntity = function () {\n        var start = this.sectionStart + 1;\n        // The max length of legacy entities is 6\n        var limit = Math.min(this._index - start, 6);\n        while (limit >= 2) {\n            // The min length of legacy entities is 2\n            var entity = this.buffer.substr(start, limit);\n            if (Object.prototype.hasOwnProperty.call(legacy_json_1.default, entity)) {\n                this.emitPartial(legacy_json_1.default[entity]);\n                this.sectionStart += limit + 1;\n                return;\n            }\n            limit--;\n        }\n    };\n    Tokenizer.prototype.stateInNamedEntity = function (c) {\n        if (c === \";\") {\n            this.parseFixedEntity();\n            // Retry as legacy entity if entity wasn't parsed\n            if (this.baseState === 1 /* Text */ &&\n                this.sectionStart + 1 < this._index &&\n                !this.xmlMode) {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n        }\n        else if ((c < \"0\" || c > \"9\") && !isASCIIAlpha(c)) {\n            if (this.xmlMode || this.sectionStart + 1 === this._index) {\n                // Ignore\n            }\n            else if (this.baseState !== 1 /* Text */) {\n                if (c !== \"=\") {\n                    // Parse as legacy entity, without allowing additional characters.\n                    this.parseFixedEntity(legacy_json_1.default);\n                }\n            }\n            else {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.decodeNumericEntity = function (offset, base, strict) {\n        var sectionStart = this.sectionStart + offset;\n        if (sectionStart !== this._index) {\n            // Parse entity\n            var entity = this.buffer.substring(sectionStart, this._index);\n            var parsed = parseInt(entity, base);\n            this.emitPartial(decode_codepoint_1.default(parsed));\n            this.sectionStart = strict ? this._index + 1 : this._index;\n        }\n        this._state = this.baseState;\n    };\n    Tokenizer.prototype.stateInNumericEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(2, 10, true);\n        }\n        else if (c < \"0\" || c > \"9\") {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(2, 10, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInHexEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(3, 16, true);\n        }\n        else if ((c < \"a\" || c > \"f\") &&\n            (c < \"A\" || c > \"F\") &&\n            (c < \"0\" || c > \"9\")) {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(3, 16, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.cleanup = function () {\n        if (this.sectionStart < 0) {\n            this.buffer = \"\";\n            this.bufferOffset += this._index;\n            this._index = 0;\n        }\n        else if (this.running) {\n            if (this._state === 1 /* Text */) {\n                if (this.sectionStart !== this._index) {\n                    this.cbs.ontext(this.buffer.substr(this.sectionStart));\n                }\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else if (this.sectionStart === this._index) {\n                // The section just started\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else {\n                // Remove everything unnecessary\n                this.buffer = this.buffer.substr(this.sectionStart);\n                this._index -= this.sectionStart;\n                this.bufferOffset += this.sectionStart;\n            }\n            this.sectionStart = 0;\n        }\n    };\n    /**\n     * Iterates through the buffer, calling the function corresponding to the current state.\n     *\n     * States that are more likely to be hit are higher up, as a performance improvement.\n     */\n    Tokenizer.prototype.parse = function () {\n        while (this._index < this.buffer.length && this.running) {\n            var c = this.buffer.charAt(this._index);\n            if (this._state === 1 /* Text */) {\n                this.stateText(c);\n            }\n            else if (this._state === 12 /* InAttributeValueDq */) {\n                this.stateInAttributeValueDoubleQuotes(c);\n            }\n            else if (this._state === 9 /* InAttributeName */) {\n                this.stateInAttributeName(c);\n            }\n            else if (this._state === 19 /* InComment */) {\n                this.stateInComment(c);\n            }\n            else if (this._state === 20 /* InSpecialComment */) {\n                this.stateInSpecialComment(c);\n            }\n            else if (this._state === 8 /* BeforeAttributeName */) {\n                this.stateBeforeAttributeName(c);\n            }\n            else if (this._state === 3 /* InTagName */) {\n                this.stateInTagName(c);\n            }\n            else if (this._state === 6 /* InClosingTagName */) {\n                this.stateInClosingTagName(c);\n            }\n            else if (this._state === 2 /* BeforeTagName */) {\n                this.stateBeforeTagName(c);\n            }\n            else if (this._state === 10 /* AfterAttributeName */) {\n                this.stateAfterAttributeName(c);\n            }\n            else if (this._state === 13 /* InAttributeValueSq */) {\n                this.stateInAttributeValueSingleQuotes(c);\n            }\n            else if (this._state === 11 /* BeforeAttributeValue */) {\n                this.stateBeforeAttributeValue(c);\n            }\n            else if (this._state === 5 /* BeforeClosingTagName */) {\n                this.stateBeforeClosingTagName(c);\n            }\n            else if (this._state === 7 /* AfterClosingTagName */) {\n                this.stateAfterClosingTagName(c);\n            }\n            else if (this._state === 32 /* BeforeSpecialS */) {\n                this.stateBeforeSpecialS(c);\n            }\n            else if (this._state === 21 /* AfterComment1 */) {\n                this.stateAfterComment1(c);\n            }\n            else if (this._state === 14 /* InAttributeValueNq */) {\n                this.stateInAttributeValueNoQuotes(c);\n            }\n            else if (this._state === 4 /* InSelfClosingTag */) {\n                this.stateInSelfClosingTag(c);\n            }\n            else if (this._state === 16 /* InDeclaration */) {\n                this.stateInDeclaration(c);\n            }\n            else if (this._state === 15 /* BeforeDeclaration */) {\n                this.stateBeforeDeclaration(c);\n            }\n            else if (this._state === 22 /* AfterComment2 */) {\n                this.stateAfterComment2(c);\n            }\n            else if (this._state === 18 /* BeforeComment */) {\n                this.stateBeforeComment(c);\n            }\n            else if (this._state === 33 /* BeforeSpecialSEnd */) {\n                this.stateBeforeSpecialSEnd(c);\n            }\n            else if (this._state === 53 /* BeforeSpecialTEnd */) {\n                stateAfterSpecialTEnd(this, c);\n            }\n            else if (this._state === 39 /* AfterScript1 */) {\n                stateAfterScript1(this, c);\n            }\n            else if (this._state === 40 /* AfterScript2 */) {\n                stateAfterScript2(this, c);\n            }\n            else if (this._state === 41 /* AfterScript3 */) {\n                stateAfterScript3(this, c);\n            }\n            else if (this._state === 34 /* BeforeScript1 */) {\n                stateBeforeScript1(this, c);\n            }\n            else if (this._state === 35 /* BeforeScript2 */) {\n                stateBeforeScript2(this, c);\n            }\n            else if (this._state === 36 /* BeforeScript3 */) {\n                stateBeforeScript3(this, c);\n            }\n            else if (this._state === 37 /* BeforeScript4 */) {\n                stateBeforeScript4(this, c);\n            }\n            else if (this._state === 38 /* BeforeScript5 */) {\n                this.stateBeforeSpecialLast(c, 2 /* Script */);\n            }\n            else if (this._state === 42 /* AfterScript4 */) {\n                stateAfterScript4(this, c);\n            }\n            else if (this._state === 43 /* AfterScript5 */) {\n                this.stateAfterSpecialLast(c, 6);\n            }\n            else if (this._state === 44 /* BeforeStyle1 */) {\n                stateBeforeStyle1(this, c);\n            }\n            else if (this._state === 29 /* InCdata */) {\n                this.stateInCdata(c);\n            }\n            else if (this._state === 45 /* BeforeStyle2 */) {\n                stateBeforeStyle2(this, c);\n            }\n            else if (this._state === 46 /* BeforeStyle3 */) {\n                stateBeforeStyle3(this, c);\n            }\n            else if (this._state === 47 /* BeforeStyle4 */) {\n                this.stateBeforeSpecialLast(c, 3 /* Style */);\n            }\n            else if (this._state === 48 /* AfterStyle1 */) {\n                stateAfterStyle1(this, c);\n            }\n            else if (this._state === 49 /* AfterStyle2 */) {\n                stateAfterStyle2(this, c);\n            }\n            else if (this._state === 50 /* AfterStyle3 */) {\n                stateAfterStyle3(this, c);\n            }\n            else if (this._state === 51 /* AfterStyle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 52 /* BeforeSpecialT */) {\n                stateBeforeSpecialT(this, c);\n            }\n            else if (this._state === 54 /* BeforeTitle1 */) {\n                stateBeforeTitle1(this, c);\n            }\n            else if (this._state === 55 /* BeforeTitle2 */) {\n                stateBeforeTitle2(this, c);\n            }\n            else if (this._state === 56 /* BeforeTitle3 */) {\n                stateBeforeTitle3(this, c);\n            }\n            else if (this._state === 57 /* BeforeTitle4 */) {\n                this.stateBeforeSpecialLast(c, 4 /* Title */);\n            }\n            else if (this._state === 58 /* AfterTitle1 */) {\n                stateAfterTitle1(this, c);\n            }\n            else if (this._state === 59 /* AfterTitle2 */) {\n                stateAfterTitle2(this, c);\n            }\n            else if (this._state === 60 /* AfterTitle3 */) {\n                stateAfterTitle3(this, c);\n            }\n            else if (this._state === 61 /* AfterTitle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 17 /* InProcessingInstruction */) {\n                this.stateInProcessingInstruction(c);\n            }\n            else if (this._state === 64 /* InNamedEntity */) {\n                this.stateInNamedEntity(c);\n            }\n            else if (this._state === 23 /* BeforeCdata1 */) {\n                stateBeforeCdata1(this, c);\n            }\n            else if (this._state === 62 /* BeforeEntity */) {\n                stateBeforeEntity(this, c);\n            }\n            else if (this._state === 24 /* BeforeCdata2 */) {\n                stateBeforeCdata2(this, c);\n            }\n            else if (this._state === 25 /* BeforeCdata3 */) {\n                stateBeforeCdata3(this, c);\n            }\n            else if (this._state === 30 /* AfterCdata1 */) {\n                this.stateAfterCdata1(c);\n            }\n            else if (this._state === 31 /* AfterCdata2 */) {\n                this.stateAfterCdata2(c);\n            }\n            else if (this._state === 26 /* BeforeCdata4 */) {\n                stateBeforeCdata4(this, c);\n            }\n            else if (this._state === 27 /* BeforeCdata5 */) {\n                stateBeforeCdata5(this, c);\n            }\n            else if (this._state === 28 /* BeforeCdata6 */) {\n                this.stateBeforeCdata6(c);\n            }\n            else if (this._state === 66 /* InHexEntity */) {\n                this.stateInHexEntity(c);\n            }\n            else if (this._state === 65 /* InNumericEntity */) {\n                this.stateInNumericEntity(c);\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            }\n            else if (this._state === 63 /* BeforeNumericEntity */) {\n                stateBeforeNumericEntity(this, c);\n            }\n            else {\n                this.cbs.onerror(Error(\"unknown _state\"), this._state);\n            }\n            this._index++;\n        }\n        this.cleanup();\n    };\n    Tokenizer.prototype.finish = function () {\n        // If there is remaining data, emit it in a reasonable way\n        if (this.sectionStart < this._index) {\n            this.handleTrailingData();\n        }\n        this.cbs.onend();\n    };\n    Tokenizer.prototype.handleTrailingData = function () {\n        var data = this.buffer.substr(this.sectionStart);\n        if (this._state === 29 /* InCdata */ ||\n            this._state === 30 /* AfterCdata1 */ ||\n            this._state === 31 /* AfterCdata2 */) {\n            this.cbs.oncdata(data);\n        }\n        else if (this._state === 19 /* InComment */ ||\n            this._state === 21 /* AfterComment1 */ ||\n            this._state === 22 /* AfterComment2 */) {\n            this.cbs.oncomment(data);\n        }\n        else if (this._state === 64 /* InNamedEntity */ && !this.xmlMode) {\n            this.parseLegacyEntity();\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 65 /* InNumericEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(2, 10, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 66 /* InHexEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(3, 16, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state !== 3 /* InTagName */ &&\n            this._state !== 8 /* BeforeAttributeName */ &&\n            this._state !== 11 /* BeforeAttributeValue */ &&\n            this._state !== 10 /* AfterAttributeName */ &&\n            this._state !== 9 /* InAttributeName */ &&\n            this._state !== 13 /* InAttributeValueSq */ &&\n            this._state !== 12 /* InAttributeValueDq */ &&\n            this._state !== 14 /* InAttributeValueNq */ &&\n            this._state !== 6 /* InClosingTagName */) {\n            this.cbs.ontext(data);\n        }\n        /*\n         * Else, ignore remaining data\n         * TODO add a way to remove current tag\n         */\n    };\n    Tokenizer.prototype.getSection = function () {\n        return this.buffer.substring(this.sectionStart, this._index);\n    };\n    Tokenizer.prototype.emitToken = function (name) {\n        this.cbs[name](this.getSection());\n        this.sectionStart = -1;\n    };\n    Tokenizer.prototype.emitPartial = function (value) {\n        if (this.baseState !== 1 /* Text */) {\n            this.cbs.onattribdata(value); // TODO implement the new event\n        }\n        else {\n            this.cbs.ontext(value);\n        }\n    };\n    return Tokenizer;\n}());\nexports.default = Tokenizer;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RssHandler = exports.DefaultHandler = exports.DomUtils = exports.ElementType = exports.Tokenizer = exports.createDomStream = exports.parseDOM = exports.parseDocument = exports.DomHandler = exports.Parser = void 0;\nvar Parser_1 = require(\"./Parser\");\nObject.defineProperty(exports, \"Parser\", { enumerable: true, get: function () { return Parser_1.Parser; } });\nvar domhandler_1 = require(\"domhandler\");\nObject.defineProperty(exports, \"DomHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\nObject.defineProperty(exports, \"DefaultHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\n// Helper methods\n/**\n * Parses the data, returns the resulting document.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n */\nfunction parseDocument(data, options) {\n    var handler = new domhandler_1.DomHandler(undefined, options);\n    new Parser_1.Parser(handler, options).end(data);\n    return handler.root;\n}\nexports.parseDocument = parseDocument;\n/**\n * Parses data, returns an array of the root nodes.\n *\n * Note that the root nodes still have a `Document` node as their parent.\n * Use `parseDocument` to get the `Document` node instead.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n * @deprecated Use `parseDocument` instead.\n */\nfunction parseDOM(data, options) {\n    return parseDocument(data, options).children;\n}\nexports.parseDOM = parseDOM;\n/**\n * Creates a parser instance, with an attached DOM handler.\n *\n * @param cb A callback that will be called once parsing has been completed.\n * @param options Optional options for the parser and DOM builder.\n * @param elementCb An optional callback that will be called every time a tag has been completed inside of the DOM.\n */\nfunction createDomStream(cb, options, elementCb) {\n    var handler = new domhandler_1.DomHandler(cb, options, elementCb);\n    return new Parser_1.Parser(handler, options);\n}\nexports.createDomStream = createDomStream;\nvar Tokenizer_1 = require(\"./Tokenizer\");\nObject.defineProperty(exports, \"Tokenizer\", { enumerable: true, get: function () { return __importDefault(Tokenizer_1).default; } });\nvar ElementType = __importStar(require(\"domelementtype\"));\nexports.ElementType = ElementType;\n/*\n * All of the following exports exist for backwards-compatibility.\n * They should probably be removed eventually.\n */\n__exportStar(require(\"./FeedHandler\"), exports);\nexports.DomUtils = __importStar(require(\"domutils\"));\nvar FeedHandler_1 = require(\"./FeedHandler\");\nObject.defineProperty(exports, \"RssHandler\", { enumerable: true, get: function () { return FeedHandler_1.FeedHandler; } });\n"],"names":["utils_1","require","submittableSelector","r20","rCRLF","Object","defineProperty","exports","value","isHtml","cloneDom","domEach","cssCase","camelCase","isCheerio","isTag","htmlparser2_1","domhandler_1","DomUtils","maybeCheerio","cheerio","str","replace","_","x","toUpperCase","toLowerCase","array","fn","len","length","i","dom","clone","Array","prototype","map","call","el","cloneNode","root","Document","forEach","node","parent","quickExpr","test","attributeNames","elementNames","Map","__assign","this","assign","t","s","n","arguments","p","hasOwnProperty","apply","__createBinding","create","o","m","k","k2","undefined","enumerable","get","__setModuleDefault","v","__importStar","mod","__esModule","result","ElementType","entities_1","foreignNames_1","unencodedElements","Set","singleTag","render","options","nodes","output","renderNode","type","Root","children","Directive","Doctype","data","Comment","elem","renderComment","CDATA","renderCdata","Script","Style","Tag","opts","_a","xmlMode","name","foreignModeIntegrationPoints","has","foreignElements","tag","attribs","attributes","keys","key","_b","emptyAttrs","decodeEntities","encodeXML","join","formatAttributes","selfClosingTags","renderTag","Text","renderText","__exportStar","DomHandler","domelementtype_1","node_1","reWhitespace","defaultOpts","normalizeWhitespace","withStartIndices","withEndIndices","callback","elementCB","done","tagStack","lastNode","parser","onparserinit","onreset","onend","handleCallback","onerror","error","onclosetag","pop","endIndex","onopentag","element","Element","addNode","push","ontext","oncomment","oncommentend","oncdatastart","text","NodeWithChildren","oncdataend","onprocessinginstruction","ProcessingInstruction","previousSibling","startIndex","prev","next","__extends","extendStatics","d","b","setPrototypeOf","__proto__","TypeError","String","__","constructor","hasChildren","isDocument","isDirective","isComment","isText","isCDATA","DataNode","Node","nodeTypes","configurable","set","recursive","_super","_this","namespace","prefix","cloneChildren","clone_1","child","clone_2","clone_3","Error","concat","instruction","sourceCodeLocation","childs","getFeed","stringify_1","legacy_1","doc","feedRoot","getOneElement","isValidFeed","feed","items","getElementsByTagName","item","entry","media","getMediaElements","addConditionally","href","link","description","fetch","pubDate","Date","updated","getAtomFeed","substr","id","getRssFeed","MEDIA_KEYS_STRING","MEDIA_KEYS_INT","where","medium","isDefault","_i","MEDIA_KEYS_STRING_1","attrib","MEDIA_KEYS_INT_1","parseInt","expression","tagName","recurse","textContent","trim","obj","prop","val","uniqueSort","compareDocumentPosition","removeSubsets","nodeA","nodeB","aParents","bParents","current","unshift","maxIdx","Math","min","idx","sharedParent","siblings","aSibling","bSibling","indexOf","lastIndexOf","splice","ancestor","includes","filter","arr","sort","a","relative","getElementsByTagType","getElementById","getElements","testElement","querying_1","Checks","tag_name","tag_type","tag_contains","getAttribCheck","combineFuncs","compileTest","funcs","reduce","limit","Infinity","isArray","findOne","removeElement","prepend","prependChild","append","appendChild","replaceElement","replacement","sibling","currNext","findAll","existsOne","findOneChild","find","nodes_1","checked","some","stack","shift","__importDefault","innerText","getText","getInnerHTML","getOuterHTML","dom_serializer_1","default","prevElementSibling","nextElementSibling","getName","hasAttrib","getAttributeValue","getSiblings","getParent","getChildren","emptyArray","decodeHTML","decodeHTMLStrict","decodeXML","entities_json_1","legacy_json_1","xml_json_1","decode_codepoint_1","strictEntityRe","getStrictDecoder","getReplacer","sorter","charAt","secondChar","slice","legacy","j","re","RegExp","replacer","decode_json_1","fromCodePoint","codePoint","fromCharCode","escapeUTF8","escape","encodeNonAsciiHTML","encodeHTML","inverseXML","getInverseObj","xmlReplacer","getInverseReplacer","getASCIIEncoder","inverse","inverseHTML","htmlReplacer","single","multiple","start","end","charCodeAt","count","reNonASCII","singleCharReplacer","getCodePoint","codePointAt","c","toString","reEscapeChars","source","decodeXMLStrict","decodeHTML5Strict","decodeHTML4Strict","decodeHTML5","decodeHTML4","encodeHTML5","encodeHTML4","encode","decodeStrict","decode","decode_1","encode_1","level","encode_2","decode_2","parseFeed","FeedHandler","FeedItemMediaMedium","FeedItemMediaExpression","Parser_1","getAttribute","url","fileSize","bitrate","framerate","samplingrate","channels","duration","height","width","lang","what","tmp","handler","Parser","Tokenizer_1","formTags","pTag","openImpliesClose","tr","th","td","body","li","h1","h2","h3","h4","h5","h6","select","input","button","datalist","textarea","option","optgroup","dd","dt","address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","header","hr","main","nav","ol","pre","section","table","ul","rt","rp","tbody","tfoot","voidElements","foreignContextElements","htmlIntegrationElements","reNameEnd","cbs","_c","_d","_e","tagname","attribname","attribvalue","foreignContext","lowerCaseTagNames","lowerCaseTags","lowerCaseAttributeNames","tokenizer","Tokenizer","updatePosition","initialOffset","sectionStart","getAbsoluteIndex","onopentagname","onopentagend","closeCurrentTag","pos","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","quote","onattribute","getInstructionName","search","ondeclaration","name_1","name_2","oncdata","_f","recognizeCDATA","err","reset","parseComplete","write","chunk","pause","resume","parseChunk","whitespace","isASCIIAlpha","ifElseState","upper","SUCCESS","FAILURE","lower","_state","_index","consumeSpecialNameChar","NEXT_STATE","stateBeforeCdata1","stateBeforeCdata2","stateBeforeCdata3","stateBeforeCdata4","stateBeforeCdata5","stateBeforeScript1","stateBeforeScript2","stateBeforeScript3","stateBeforeScript4","stateAfterScript1","stateAfterScript2","stateAfterScript3","stateAfterScript4","stateBeforeStyle1","stateBeforeStyle2","stateBeforeStyle3","stateAfterStyle1","stateAfterStyle2","stateAfterStyle3","stateBeforeSpecialT","stateBeforeTitle1","stateBeforeTitle2","stateBeforeTitle3","stateAfterSpecialTEnd","stateAfterTitle1","stateAfterTitle2","stateAfterTitle3","stateBeforeEntity","stateBeforeNumericEntity","buffer","bufferOffset","baseState","special","running","ended","parse","finish","stateText","getSection","isTagStartChar","stateBeforeTagName","stateInTagName","emitToken","stateBeforeClosingTagName","stateInClosingTagName","stateAfterClosingTagName","stateBeforeAttributeName","stateInSelfClosingTag","stateInAttributeName","stateAfterAttributeName","stateBeforeAttributeValue","handleInAttributeValue","stateInAttributeValueDoubleQuotes","stateInAttributeValueSingleQuotes","stateInAttributeValueNoQuotes","stateBeforeDeclaration","stateInDeclaration","stateInProcessingInstruction","stateBeforeComment","stateInComment","stateInSpecialComment","substring","stateAfterComment1","stateAfterComment2","stateBeforeCdata6","stateInCdata","stateAfterCdata1","stateAfterCdata2","stateBeforeSpecialS","stateBeforeSpecialSEnd","stateBeforeSpecialLast","stateAfterSpecialLast","sectionStartOffset","parseFixedEntity","entity","emitPartial","parseLegacyEntity","stateInNamedEntity","decodeNumericEntity","offset","base","strict","parsed","stateInNumericEntity","stateInHexEntity","cleanup","handleTrailingData","RssHandler","DefaultHandler","createDomStream","parseDOM","parseDocument","cb","elementCb","FeedHandler_1"],"sourceRoot":""}